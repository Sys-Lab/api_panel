!function(){"use strict";function b(a,b){return a.line-b.line||a.ch-b.ch}function f(a,b,c,d){this.line=b,this.ch=c,this.cm=a,this.text=a.getLine(b),this.min=d?d.from:a.firstLine(),this.max=d?d.to-1:a.lastLine()}function g(b,c){var d=b.cm.getTokenTypeAt(a(b.line,c));return d&&/\btag\b/.test(d)}function h(a){return a.line>=a.max?void 0:(a.ch=0,a.text=a.cm.getLine(++a.line),!0)}function i(a){return a.line<=a.min?void 0:(a.text=a.cm.getLine(--a.line),a.ch=a.text.length,!0)}function j(a){for(var b,c,d;;){if(b=a.text.indexOf(">",a.ch),-1==b){if(h(a))continue;return}if(g(a,b+1))return c=a.text.lastIndexOf("/",b),d=c>-1&&!/\S/.test(a.text.slice(c+1,b)),a.ch=b+1,d?"selfClose":"regular";a.ch=b+1}}function k(a){for(var b,c;;){if(b=a.ch?a.text.lastIndexOf("<",a.ch-1):-1,-1==b){if(i(a))continue;return}if(g(a,b+1)){if(e.lastIndex=b,a.ch=b,c=e.exec(a.text),c&&c.index==b)return c}else a.ch=b}}function l(a){for(;;){e.lastIndex=a.ch;var b=e.exec(a.text);if(!b){if(h(a))continue;return}{if(g(a,b.index+1))return a.ch=b.index+b[0].length,b;a.ch=b.index+1}}}function m(a){for(var b,c,d;;){if(b=a.ch?a.text.lastIndexOf(">",a.ch-1):-1,-1==b){if(i(a))continue;return}if(g(a,b+1))return c=a.text.lastIndexOf("/",b),d=c>-1&&!/\S/.test(a.text.slice(c+1,b)),a.ch=b+1,d?"selfClose":"regular";a.ch=b}}function n(b,c){for(var f,e,g,h,i,d=[];;){if(e=l(b),g=b.line,h=b.ch-(e?e[0].length:0),!e||!(f=j(b)))return;if("selfClose"!=f)if(e[1]){for(i=d.length-1;i>=0;--i)if(d[i]==e[2]){d.length=i;break}if(0>i&&(!c||c==e[2]))return{tag:e[2],from:a(g,h),to:a(b.line,b.ch)}}else d.push(e[2])}}function o(b,c){for(var e,f,g,h,i,d=[];;){if(e=m(b),!e)return;if("selfClose"!=e){if(f=b.line,g=b.ch,h=k(b),!h)return;if(h[1])d.push(h[2]);else{for(i=d.length-1;i>=0;--i)if(d[i]==h[2]){d.length=i;break}if(0>i&&(!c||c==h[2]))return{tag:h[2],from:a(b.line,b.ch),to:a(f,g)}}}else k(b)}}var a=CodeMirror.Pos,c="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",d=c+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",e=new RegExp("<(/?)(["+c+"]["+d+"]*)","g");CodeMirror.registerHelper("fold","xml",function(b,c){for(var g,e,h,d=new f(b,c.line,0);;){if(e=l(d),!e||d.line!=c.line||!(g=j(d)))return;if(!e[1]&&"selfClose"!=g)return c=a(d.line,d.ch),h=n(d,e[2]),h&&{from:c,to:h.from}}}),CodeMirror.tagRangeFinder=CodeMirror.fold.xml,CodeMirror.findMatchingTag=function(c,d,e){var h,i,l,m,g=new f(c,d.line,d.ch,e);if((-1!=g.text.indexOf(">")||-1!=g.text.indexOf("<"))&&(h=j(g),i=h&&a(g.line,g.ch),l=h&&k(g),h&&"selfClose"!=h&&l&&!(b(g,d)>0)))return m={from:a(g.line,g.ch),to:i,tag:l[2]},l[1]?{open:o(g,l[2]),close:m,at:"close"}:(g=new f(c,i.line,i.ch,e),{open:m,close:n(g,l[2]),at:"open"})},CodeMirror.findEnclosingTag=function(a,b,c){for(var e,g,h,d=new f(a,b.line,b.ch,c);e=o(d),e;)if(g=new f(a,b.line,b.ch,c),h=n(g,e.tag))return{open:e,close:h}}}();