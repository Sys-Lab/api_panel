<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <!-- disable zooming -->
  <meta name="viewport" content="width=device-width,initial-scale=1.0, user-scalable=0" />
  <link rel="stylesheet" href="assert/css/main.css">
  <title>API Panel - SysLab dreampanel project</title>
</head>
<body>
<input type="file" id="syslab_api_load_file">
<div id="syslab_api_plbg" onselectstart="return false;">
  <div id="syslab_api_plbg_toolbox">
  		<div id="syslab_api_toolbox_to_fold">&#xe0a2;</div>
    	<div id="syslab_api_toolbox_to_unfold">&#xe0a3;</div>
        <div id="syslab_api_toolbox_to_add">&#x7b;</div>
  </div>
  <div id="syslab_api_plbg_apis" style="width:260px;"></div>
  <div id="syslab_api_plbg_apis_search" style="width:260px;"></div>
  <div id="syslab_api_plbg_fold">&#x3e;</div>
  <input id="syslab_api_plbg_search" type="text" placeholder="输入API搜索">
</div>
<div id="syslab_api_plbg_des">
	<div id="syslab_api_plbg_des_des" class="syslab_api_plbg_des_show"><span>&#x2d;</span>点击选择左边的API</div>
    <div id="syslab_api_plbg_des_datas" class="syslab_api_plbg_des_hide">
        <div id="syslab_api_plbg_des_name"></div>
        <div id="syslab_api_plbg_des_detialdes"></div>
        <div id="syslab_api_plbg_des_apivar">
                <center>
                    <div id="syslab_api_plbg_des_statue">
                        <li class="bgWhite"><span class="syslab_api_plbg_des_statue">登录认证</span><span class="syslab_api_plbg_des_statue_ico">&#x55;</span><span id="syslab_api_plbg_des_statue_login" class="syslab_api_plbg_des_edit_btn" name="bolen">&#xe078;</span></li>
                        <li class="bgBlack"><span class="syslab_api_plbg_des_statue">管理权限</span><span class="syslab_api_plbg_des_statue_ico">&#x55;</span><span id="syslab_api_plbg_des_statue_admin" class="syslab_api_plbg_des_edit_btn" name="bolen">&#xe078;</span></li>
                        <li class="bgWhite"><span class="syslab_api_plbg_des_statue">POST</span><span class="syslab_api_plbg_des_statue_ico">&#x55;</span><span id="syslab_api_plbg_des_statue_post" class="syslab_api_plbg_des_edit_btn" name="bolen">&#xe078;</span></li>
                        <li class="bgBlack"><span class="syslab_api_plbg_des_statue">GET</span><span class="syslab_api_plbg_des_statue_ico">&#x55;</span><span id="syslab_api_plbg_des_statue_get" class="syslab_api_plbg_des_edit_btn" name="bolen">&#xe078;</span></li>
                        <li class="bgWhite"><span class="syslab_api_plbg_des_statue">JSONP</span><span class="syslab_api_plbg_des_statue_ico">&#x56;</span><span id="syslab_api_plbg_des_statue_jsonp" class="syslab_api_plbg_des_edit_btn" name="bolen">&#xe078;</span></li>
                        <li class="bgBlack"><span class="syslab_api_plbg_des_statue">请求格式</span><span>JSON</span><span class="syslab_api_plbg_des_edit_btn"  id="syslab_api_plbg_des_statue_req">&#xe078;</span></li>
                    </div>
                </center>
                <div id="syslab_api_plbg_des_inputvar_title">
                    <span>请求参数</span><span class="syslab_api_plbg_des_edit_btn" id="syslab_api_plbg_des_inputvar_add" onclick="SYSLAB_GS_LOCK_INPUTVAR_add=1;">&#xe076;</span>
                </div>
                <center>
                    <div id="syslab_api_plbg_des_inputvar"></div>
                </center>
                <div id="syslab_api_plbg_des_code_title">
                    <span>返回结果</span><span  id="syslab_api_plbg_des_code_title_btn" class="syslab_api_plbg_des_edit_btn" name="code">&#xe078;</span>
                </div>
                <div id="syslab_api_plbg_des_code"><pre class="brush: js"></pre>
                     
                </div>
                <div id="syslab_api_plbg_des_codedes_title">
                    <span>返回字段说明</span><span class="syslab_api_plbg_des_edit_btn" id="syslab_api_plbg_codedes_add" onclick="SYSLAB_GS_LOCK_CODEDES_add=1;">&#xe076;</span>
                </div>
                <center>
                    <div id="syslab_api_plbg_codedes">
                    </div>
                </center>
                <div id="syslab_api_plbg_des_des_title">
                    <span>说明</span><span id="syslab_api_plbg_des_des_var_btn" class="syslab_api_plbg_des_edit_btn" name="code">&#xe078;</span>
                </div>
                <div id="syslab_api_plbg_des_des_var"></div>
         </div>
        <br/>
        <br/>
        <br/>
       <br/>
    </div>
    <div id="syslab_api_plbg_des_toolbox" class="syslab_api_plbg_des_hide">
    	<div id="syslab_api_plbg_des_del">&#x4b;</div>
	</div>
    	
    
</div>
<div id="syslab_api_toolbox" class="syslab_api_toolbox_show">
	<div id="syslab_api_toolbox_to_top">&#x2e;</div>
</div>
<div id="syslab_api_toolbox_sl" class="syslab_api_toolbox_show">
	<div id="syslab_api_plbg_des_edit" class="syslab_api_plbg_des_edit_off">&#xe078;</div>
	<div id="syslab_api_toolbox_to_save">&#x4c;</div>
	<div id="syslab_api_toolbox_to_load" style="display:none;">&#x39;</div>
    <div id="syslab_api_toolbox_to_export">&#x37;</div>
</div>
<div id="syslab_api_infobox">
	
</div>
<div id="syslab_api_landing" onselectstart="return false;">
	<div id="syslab_api_landing_local" onselectstart="return false;">
    	<div id="syslab_api_landing_local_big">
        	<div class="syslab_api_landing_title">本地模式</div>
            <div class="syslab_api_landing_ico">&#x21;</div>
            <div class="syslab_api_landing_list">
            	<li>
                	<div class="syslab_api_landing_ynwoeds">文档备份 , 本地备份任我掌控</div><div class="syslab_api_landing_ynico">&#x56;</div>
                </li>
                <li>
                	<div class="syslab_api_landing_ynwoeds">自动存档 , 文档数据崩溃不丢</div><div class="syslab_api_landing_ynico">&#x56;</div>
                </li>
                <li>
                	<div class="syslab_api_landing_ynwoeds">云端存储 , 自在分享随处可得</div><div class="syslab_api_landing_ynico">&#x55;</div>
                </li>
                <li>
                	<div class="syslab_api_landing_ynwoeds">团队分享 , 自由修改高效合作</div><div class="syslab_api_landing_ynico">&#x55;</div>
                </li>
            </div>
            <div id="syslab_api_landing_local_go">
            	<div>即刻开始使用</div>
            	<div class="syslab_api_landing_go">&#x40;</div>
            </div>
        </div>
        <div id="syslab_api_landing_local_sm">
        	<div class="syslab_api_landing_sm">&#x2d;</div>
            <div>本地模式</div>
        </div>
    </div>
    <div id="syslab_api_landing_cloud" onselectstart="return false;">
    	<div id="syslab_api_landing_cloud_big">
        	<div class="syslab_api_landing_title">云端模式</div>
            <div class="syslab_api_landing_ico">&#x4f;</div>
            <div class="syslab_api_landing_list">
            	<li>
                	<div class="syslab_api_landing_ynwoeds">文档备份 , 本地备份任我掌控</div><div class="syslab_api_landing_ynico">&#x56;</div>
                </li>
                <li>
                	<div class="syslab_api_landing_ynwoeds">自动存档 , 文档数据崩溃不丢</div><div class="syslab_api_landing_ynico">&#x56;</div>
                </li>
                <li>
                	<div class="syslab_api_landing_ynwoeds">云端存储 , 自在分享随处可得</div><div class="syslab_api_landing_ynico">&#x56;</div>
                </li>
                <li>
                	<div class="syslab_api_landing_ynwoeds">团队分享 , 自由修改高效合作</div><div class="syslab_api_landing_ynico">&#x56;</div>
                </li>
            </div>
            <div id="syslab_api_landing_cloud_go">
            	<div>即刻开始使用</div>
            	<div class="syslab_api_landing_go">&#x40;</div>
            </div>
        </div>
        <div id="syslab_api_landing_cloud_ls">
            	<div class="syslab_api_landing_cloud_ls_title"><span>&#x4f;</span>登录 / 注册</div>
                <div class="syslab_api_landing_cloud_ls_ips" id="syslab_api_landing_cloud_ls_ips">
                    <li>
                        <div class="syslab_api_landing_cloud_ls_ips_t">Email :</div><input id="syslab_api_landing_cloud_ls_ips_email" type="text" placeholder="someone@gmail.com">
                    </li>
                    <li>
                        <div class="syslab_api_landing_cloud_ls_ips_t">Password :</div><input id="syslab_api_landing_cloud_ls_ips_pass" type="password">
                    </li>
                </div>
                <div id="syslab_api_landing_cloud_ls_notice" class="syslab_api_landing_cloud_ls_btn"><span>&#xe016;</span>无法连到接服务器</div>
                <div id="syslab_api_landing_cloud_ls_login_go" class="syslab_api_landing_cloud_ls_btn">登录</div>
                <div id="syslab_api_landing_cloud_ls_signup_go" class="syslab_api_landing_cloud_ls_btn">立即注册</div>
            </div>
        <div id="syslab_api_landing_cloud_sm">
        	<div class="syslab_api_landing_sm">&#x2c;</div>
            <div>云端模式</div>
        </div>
    </div>
    <div id="syslab_api_landing_choosepj" onselectstart="return false;">
        <div class="syslab_api_landing_choosepj_title"><span>&#x4d;</span>选择/创建 文档</div>
        <div class="syslab_api_landing_choosepj_add" id="syslab_api_landing_choosepj_addbtn">&#x7b;</div>
        <div class="syslab_api_landing_choosepj_add" id="syslab_api_landing_choosepj_del">&#x4b;</div>
        <div class="syslab_api_landing_choosepj_add" id="syslab_api_landing_choosepj_logout">&#xe014;</div>
        <div class="syslab_api_landing_choosepj_list" id="syslab_api_landing_choosepj_list">
           <div class='syslab_api_landing_choosepj_list_loading syslab_api_loading'>&#xe09a;</div>
        </div>
        <div id="syslab_api_landing_choosepj_add">
            <li>
                <div class="syslab_api_landing_cloud_ls_ips_t">文档名 :</div><input id="syslab_api_landing_choosepj_add_name" type="text">
            </li>
            <li>
                <div class="syslab_api_landing_cloud_ls_ips_t">API版本 :</div><input id="syslab_api_landing_choosepj_add_apiver" type="text">
            </li>
            <div id="syslab_api_landing_choosepj_add_go" class="syslab_api_landing_cloud_ls_btn">确定</div>
            <div id="syslab_api_landing_choosepj_add_cancle" class="syslab_api_landing_cloud_ls_btn">取消</div>
        </div>
        <div id="syslab_api_landing_choosepj_go">
            <div>开始编辑</div>
            <div class="syslab_api_landing_go">&#x40;</div>
        </div>
    </div>
	<div id="syslab_api_loading" onselectstart="return false;">
    	<div class='syslab_api_loading_logo'>API Panel</div>
    	<div class='syslab_api_loading_main syslab_api_loading'>&#xe09a;</div>
        <div class='syslab_api_loading_tech'><span onClick="window.open('http://nodejs.org/');">NodeJs</span> <span onClick="window.open('http://www.mongodb.org/');">MongoDb</span> <span onClick="window.open('http://socket.io/');">Socket.IO</span> <span>HTML5</span></div>
        <div class='syslab_api_loading_build' onClick="window.open('https://github.com/Sys-Lab/api_panel');">Open source on Github .&nbsp;&nbsp;&nbsp;v 2013092001</div>
    </div>
</div>
<div id="syslab_api_notice"></div>
<div id="syslab_api_msgbox">
	<div id="syslab_api_msgbox_bg">
    	<div id="syslab_api_msgbox_title">
        	<div id="syslab_api_msgbox_title_t"></div>
            <div id="syslab_api_msgbox_title_close">X</div>
        </div>
        <div id="syslab_api_msgbox_content"></div>
    </div>
</div>
</body>
<script type="text/JavaScript" src="jsDraw2DX.js"></script>
<script src="jquery.ajax.min.js"></script>
<script src="filer.min.js"></script>
<script src="socket.io.min.js"></script>
<script src="sjcl.js"></script>

<script src="microjs.min.js"></script>
<script src="base.full.js"></script>
<script src="md5.js"></script>

<script type="text/javascript">
/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('K M;I(M)1S 2U("2a\'t 4k M 4K 2g 3l 4G 4H");(6(){6 r(f,e){I(!M.1R(f))1S 3m("3s 15 4R");K a=f.1w;f=M(f.1m,t(f)+(e||""));I(a)f.1w={1m:a.1m,19:a.19?a.19.1a(0):N};H f}6 t(f){H(f.1J?"g":"")+(f.4s?"i":"")+(f.4p?"m":"")+(f.4v?"x":"")+(f.3n?"y":"")}6 B(f,e,a,b){K c=u.L,d,h,g;v=R;5K{O(;c--;){g=u[c];I(a&g.3r&&(!g.2p||g.2p.W(b))){g.2q.12=e;I((h=g.2q.X(f))&&h.P===e){d={3k:g.2b.W(b,h,a),1C:h};1N}}}}5v(i){1S i}5q{v=11}H d}6 p(f,e,a){I(3b.Z.1i)H f.1i(e,a);O(a=a||0;a<f.L;a++)I(f[a]===e)H a;H-1}M=6(f,e){K a=[],b=M.1B,c=0,d,h;I(M.1R(f)){I(e!==1d)1S 3m("2a\'t 5r 5I 5F 5B 5C 15 5E 5p");H r(f)}I(v)1S 2U("2a\'t W 3l M 59 5m 5g 5x 5i");e=e||"";O(d={2N:11,19:[],2K:6(g){H e.1i(g)>-1},3d:6(g){e+=g}};c<f.L;)I(h=B(f,c,b,d)){a.U(h.3k);c+=h.1C[0].L||1}Y I(h=n.X.W(z[b],f.1a(c))){a.U(h[0]);c+=h[0].L}Y{h=f.3a(c);I(h==="[")b=M.2I;Y I(h==="]")b=M.1B;a.U(h);c++}a=15(a.1K(""),n.Q.W(e,w,""));a.1w={1m:f,19:d.2N?d.19:N};H a};M.3v="1.5.0";M.2I=1;M.1B=2;K C=/\\$(?:(\\d\\d?|[$&`\'])|{([$\\w]+)})/g,w=/[^5h]+|([\\s\\S])(?=[\\s\\S]*\\1)/g,A=/^(?:[?*+]|{\\d+(?:,\\d*)?})\\??/,v=11,u=[],n={X:15.Z.X,1A:15.Z.1A,1C:1r.Z.1C,Q:1r.Z.Q,1e:1r.Z.1e},x=n.X.W(/()??/,"")[1]===1d,D=6(){K f=/^/g;n.1A.W(f,"");H!f.12}(),y=6(){K f=/x/g;n.Q.W("x",f,"");H!f.12}(),E=15.Z.3n!==1d,z={};z[M.2I]=/^(?:\\\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S]))/;z[M.1B]=/^(?:\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\\d*|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S])|\\(\\?[:=!]|[?*+]\\?|{\\d+(?:,\\d*)?}\\??)/;M.1h=6(f,e,a,b){u.U({2q:r(f,"g"+(E?"y":"")),2b:e,3r:a||M.1B,2p:b||N})};M.2n=6(f,e){K a=f+"/"+(e||"");H M.2n[a]||(M.2n[a]=M(f,e))};M.3c=6(f){H r(f,"g")};M.5l=6(f){H f.Q(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,"\\\\$&")};M.5e=6(f,e,a,b){e=r(e,"g"+(b&&E?"y":""));e.12=a=a||0;f=e.X(f);H b?f&&f.P===a?f:N:f};M.3q=6(){M.1h=6(){1S 2U("2a\'t 55 1h 54 3q")}};M.1R=6(f){H 53.Z.1q.W(f)==="[2m 15]"};M.3p=6(f,e,a,b){O(K c=r(e,"g"),d=-1,h;h=c.X(f);){a.W(b,h,++d,f,c);c.12===h.P&&c.12++}I(e.1J)e.12=0};M.57=6(f,e){H 6 a(b,c){K d=e[c].1I?e[c]:{1I:e[c]},h=r(d.1I,"g"),g=[],i;O(i=0;i<b.L;i++)M.3p(b[i],h,6(k){g.U(d.3j?k[d.3j]||"":k[0])});H c===e.L-1||!g.L?g:a(g,c+1)}([f],0)};15.Z.1p=6(f,e){H J.X(e[0])};15.Z.W=6(f,e){H J.X(e)};15.Z.X=6(f){K e=n.X.1p(J,14),a;I(e){I(!x&&e.L>1&&p(e,"")>-1){a=15(J.1m,n.Q.W(t(J),"g",""));n.Q.W(f.1a(e.P),a,6(){O(K c=1;c<14.L-2;c++)I(14[c]===1d)e[c]=1d})}I(J.1w&&J.1w.19)O(K b=1;b<e.L;b++)I(a=J.1w.19[b-1])e[a]=e[b];!D&&J.1J&&!e[0].L&&J.12>e.P&&J.12--}H e};I(!D)15.Z.1A=6(f){(f=n.X.W(J,f))&&J.1J&&!f[0].L&&J.12>f.P&&J.12--;H!!f};1r.Z.1C=6(f){M.1R(f)||(f=15(f));I(f.1J){K e=n.1C.1p(J,14);f.12=0;H e}H f.X(J)};1r.Z.Q=6(f,e){K a=M.1R(f),b,c;I(a&&1j e.58()==="3f"&&e.1i("${")===-1&&y)H n.Q.1p(J,14);I(a){I(f.1w)b=f.1w.19}Y f+="";I(1j e==="6")c=n.Q.W(J,f,6(){I(b){14[0]=1f 1r(14[0]);O(K d=0;d<b.L;d++)I(b[d])14[0][b[d]]=14[d+1]}I(a&&f.1J)f.12=14[14.L-2]+14[0].L;H e.1p(N,14)});Y{c=J+"";c=n.Q.W(c,f,6(){K d=14;H n.Q.W(e,C,6(h,g,i){I(g)5b(g){24"$":H"$";24"&":H d[0];24"`":H d[d.L-1].1a(0,d[d.L-2]);24"\'":H d[d.L-1].1a(d[d.L-2]+d[0].L);5a:i="";g=+g;I(!g)H h;O(;g>d.L-3;){i=1r.Z.1a.W(g,-1)+i;g=1Q.3i(g/10)}H(g?d[g]||"":"$")+i}Y{g=+i;I(g<=d.L-3)H d[g];g=b?p(b,i):-1;H g>-1?d[g+1]:h}})})}I(a&&f.1J)f.12=0;H c};1r.Z.1e=6(f,e){I(!M.1R(f))H n.1e.1p(J,14);K a=J+"",b=[],c=0,d,h;I(e===1d||+e<0)e=5D;Y{e=1Q.3i(+e);I(!e)H[]}O(f=M.3c(f);d=f.X(a);){I(f.12>c){b.U(a.1a(c,d.P));d.L>1&&d.P<a.L&&3b.Z.U.1p(b,d.1a(1));h=d[0].L;c=f.12;I(b.L>=e)1N}f.12===d.P&&f.12++}I(c===a.L){I(!n.1A.W(f,"")||h)b.U("")}Y b.U(a.1a(c));H b.L>e?b.1a(0,e):b};M.1h(/\\(\\?#[^)]*\\)/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"});M.1h(/\\((?!\\?)/,6(){J.19.U(N);H"("});M.1h(/\\(\\?<([$\\w]+)>/,6(f){J.19.U(f[1]);J.2N=R;H"("});M.1h(/\\\\k<([\\w$]+)>/,6(f){K e=p(J.19,f[1]);H e>-1?"\\\\"+(e+1)+(3R(f.2S.3a(f.P+f[0].L))?"":"(?:)"):f[0]});M.1h(/\\[\\^?]/,6(f){H f[0]==="[]"?"\\\\b\\\\B":"[\\\\s\\\\S]"});M.1h(/^\\(\\?([5A]+)\\)/,6(f){J.3d(f[1]);H""});M.1h(/(?:\\s+|#.*)+/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"},M.1B,6(){H J.2K("x")});M.1h(/\\./,6(){H"[\\\\s\\\\S]"},M.1B,6(){H J.2K("s")})})();1j 2e!="1d"&&(2e.M=M);K 1v=6(){6 r(a,b){a.1l.1i(b)!=-1||(a.1l+=" "+b)}6 t(a){H a.1i("3e")==0?a:"3e"+a}6 B(a){H e.1Y.2A[t(a)]}6 p(a,b,c){I(a==N)H N;K d=c!=R?a.3G:[a.2G],h={"#":"1c",".":"1l"}[b.1o(0,1)]||"3h",g,i;g=h!="3h"?b.1o(1):b.5u();I((a[h]||"").1i(g)!=-1)H a;O(a=0;d&&a<d.L&&i==N;a++)i=p(d[a],b,c);H i}6 C(a,b){K c={},d;O(d 2g a)c[d]=a[d];O(d 2g b)c[d]=b[d];H c}6 w(a,b,c,d){6 h(g){g=g||1P.5y;I(!g.1F){g.1F=g.52;g.3N=6(){J.5w=11}}c.W(d||1P,g)}a.3g?a.3g("4U"+b,h):a.4y(b,h,11)}6 A(a,b){K c=e.1Y.2j,d=N;I(c==N){c={};O(K h 2g e.1U){K g=e.1U[h];d=g.4x;I(d!=N){g.1V=h.4w();O(g=0;g<d.L;g++)c[d[g]]=h}}e.1Y.2j=c}d=e.1U[c[a]];d==N&&b!=11&&1P.1X(e.13.1x.1X+(e.13.1x.3E+a));H d}6 v(a,b){O(K c=a.1e("\\n"),d=0;d<c.L;d++)c[d]=b(c[d],d);H c.1K("\\n")}6 u(a,b){I(a==N||a.L==0||a=="\\n")H a;a=a.Q(/</g,"&1y;");a=a.Q(/ {2,}/g,6(c){O(K d="",h=0;h<c.L-1;h++)d+=e.13.1W;H d+" "});I(b!=N)a=v(a,6(c){I(c.L==0)H"";K d="";c=c.Q(/^(&2s;| )+/,6(h){d=h;H""});I(c.L==0)H d;H d+\'<17 1g="\'+b+\'">\'+c+"</17>"});H a}6 n(a,b){a.1e("\\n");O(K c="",d=0;d<50;d++)c+="                    ";H a=v(a,6(h){I(h.1i("\\t")==-1)H h;O(K g=0;(g=h.1i("\\t"))!=-1;)h=h.1o(0,g)+c.1o(0,b-g%b)+h.1o(g+1,h.L);H h})}6 x(a){H a.Q(/^\\s+|\\s+$/g,"")}6 D(a,b){I(a.P<b.P)H-1;Y I(a.P>b.P)H 1;Y I(a.L<b.L)H-1;Y I(a.L>b.L)H 1;H 0}6 y(a,b){6 c(k){H k[0]}O(K d=N,h=[],g=b.2D?b.2D:c;(d=b.1I.X(a))!=N;){K i=g(d,b);I(1j i=="3f")i=[1f e.2L(i,d.P,b.23)];h=h.1O(i)}H h}6 E(a){K b=/(.*)((&1G;|&1y;).*)/;H a.Q(e.3A.3M,6(c){K d="",h=N;I(h=b.X(c)){c=h[1];d=h[2]}H\'<a 2h="\'+c+\'">\'+c+"</a>"+d})}6 z(){O(K a=1E.36("1k"),b=[],c=0;c<a.L;c++)a[c].3s=="20"&&b.U(a[c]);H b}6 f(a){a=a.1F;K b=p(a,".20",R);a=p(a,".3O",R);K c=1E.4i("3t");I(!(!a||!b||p(a,"3t"))){B(b.1c);r(b,"1m");O(K d=a.3G,h=[],g=0;g<d.L;g++)h.U(d[g].4z||d[g].4A);h=h.1K("\\r");c.39(1E.4D(h));a.39(c);c.2C();c.4C();w(c,"4u",6(){c.2G.4E(c);b.1l=b.1l.Q("1m","")})}}I(1j 3F!="1d"&&1j M=="1d")M=3F("M").M;K e={2v:{"1g-27":"","2i-1s":1,"2z-1s-2t":11,1M:N,1t:N,"42-45":R,"43-22":4,1u:R,16:R,"3V-17":R,2l:11,"41-40":R,2k:11,"1z-1k":11},13:{1W:"&2s;",2M:R,46:11,44:11,34:"4n",1x:{21:"4o 1m",2P:"?",1X:"1v\\n\\n",3E:"4r\'t 4t 1D O: ",4g:"4m 4B\'t 51 O 1z-1k 4F: ",37:\'<!4T 1z 4S "-//4V//3H 4W 1.0 4Z//4Y" "1Z://2y.3L.3K/4X/3I/3H/3I-4P.4J"><1z 4I="1Z://2y.3L.3K/4L/5L"><3J><4N 1Z-4M="5G-5M" 6K="2O/1z; 6J=6I-8" /><1t>6L 1v</1t></3J><3B 1L="25-6M:6Q,6P,6O,6N-6F;6y-2f:#6x;2f:#6w;25-22:6v;2O-3D:3C;"><T 1L="2O-3D:3C;3w-32:1.6z;"><T 1L="25-22:6A-6E;">1v</T><T 1L="25-22:.6C;3w-6B:6R;"><T>3v 3.0.76 (72 73 3x)</T><T><a 2h="1Z://3u.2w/1v" 1F="38" 1L="2f:#3y">1Z://3u.2w/1v</a></T><T>70 17 6U 71.</T><T>6T 6X-3x 6Y 6D.</T></T><T>6t 61 60 J 1k, 5Z <a 2h="6u://2y.62.2w/63-66/65?64=5X-5W&5P=5O" 1L="2f:#3y">5R</a> 5V <2R/>5U 5T 5S!</T></T></3B></1z>\'}},1Y:{2j:N,2A:{}},1U:{},3A:{6n:/\\/\\*[\\s\\S]*?\\*\\//2c,6m:/\\/\\/.*$/2c,6l:/#.*$/2c,6k:/"([^\\\\"\\n]|\\\\.)*"/g,6o:/\'([^\\\\\'\\n]|\\\\.)*\'/g,6p:1f M(\'"([^\\\\\\\\"]|\\\\\\\\.)*"\',"3z"),6s:1f M("\'([^\\\\\\\\\']|\\\\\\\\.)*\'","3z"),6q:/(&1y;|<)!--[\\s\\S]*?--(&1G;|>)/2c,3M:/\\w+:\\/\\/[\\w-.\\/?%&=:@;]*/g,6a:{18:/(&1y;|<)\\?=?/g,1b:/\\?(&1G;|>)/g},69:{18:/(&1y;|<)%=?/g,1b:/%(&1G;|>)/g},6d:{18:/(&1y;|<)\\s*1k.*?(&1G;|>)/2T,1b:/(&1y;|<)\\/\\s*1k\\s*(&1G;|>)/2T}},16:{1H:6(a){6 b(i,k){H e.16.2o(i,k,e.13.1x[k])}O(K c=\'<T 1g="16">\',d=e.16.2x,h=d.2X,g=0;g<h.L;g++)c+=(d[h[g]].1H||b)(a,h[g]);c+="</T>";H c},2o:6(a,b,c){H\'<2W><a 2h="#" 1g="6e 6h\'+b+" "+b+\'">\'+c+"</a></2W>"},2b:6(a){K b=a.1F,c=b.1l||"";b=B(p(b,".20",R).1c);K d=6(h){H(h=15(h+"6f(\\\\w+)").X(c))?h[1]:N}("6g");b&&d&&e.16.2x[d].2B(b);a.3N()},2x:{2X:["21","2P"],21:{1H:6(a){I(a.V("2l")!=R)H"";K b=a.V("1t");H e.16.2o(a,"21",b?b:e.13.1x.21)},2B:6(a){a=1E.6j(t(a.1c));a.1l=a.1l.Q("47","")}},2P:{2B:6(){K a="68=0";a+=", 18="+(31.30-33)/2+", 32="+(31.2Z-2Y)/2+", 30=33, 2Z=2Y";a=a.Q(/^,/,"");a=1P.6Z("","38",a);a.2C();K b=a.1E;b.6W(e.13.1x.37);b.6V();a.2C()}}}},35:6(a,b){K c;I(b)c=[b];Y{c=1E.36(e.13.34);O(K d=[],h=0;h<c.L;h++)d.U(c[h]);c=d}c=c;d=[];I(e.13.2M)c=c.1O(z());I(c.L===0)H d;O(h=0;h<c.L;h++){O(K g=c[h],i=a,k=c[h].1l,j=3W 0,l={},m=1f M("^\\\\[(?<2V>(.*?))\\\\]$"),s=1f M("(?<27>[\\\\w-]+)\\\\s*:\\\\s*(?<1T>[\\\\w-%#]+|\\\\[.*?\\\\]|\\".*?\\"|\'.*?\')\\\\s*;?","g");(j=s.X(k))!=N;){K o=j.1T.Q(/^[\'"]|[\'"]$/g,"");I(o!=N&&m.1A(o)){o=m.X(o);o=o.2V.L>0?o.2V.1e(/\\s*,\\s*/):[]}l[j.27]=o}g={1F:g,1n:C(i,l)};g.1n.1D!=N&&d.U(g)}H d},1M:6(a,b){K c=J.35(a,b),d=N,h=e.13;I(c.L!==0)O(K g=0;g<c.L;g++){b=c[g];K i=b.1F,k=b.1n,j=k.1D,l;I(j!=N){I(k["1z-1k"]=="R"||e.2v["1z-1k"]==R){d=1f e.4l(j);j="4O"}Y I(d=A(j))d=1f d;Y 6H;l=i.3X;I(h.2M){l=l;K m=x(l),s=11;I(m.1i("<![6G[")==0){m=m.4h(9);s=R}K o=m.L;I(m.1i("]]\\>")==o-3){m=m.4h(0,o-3);s=R}l=s?m:l}I((i.1t||"")!="")k.1t=i.1t;k.1D=j;d.2Q(k);b=d.2F(l);I((i.1c||"")!="")b.1c=i.1c;i.2G.74(b,i)}}},2E:6(a){w(1P,"4k",6(){e.1M(a)})}};e.2E=e.2E;e.1M=e.1M;e.2L=6(a,b,c){J.1T=a;J.P=b;J.L=a.L;J.23=c;J.1V=N};e.2L.Z.1q=6(){H J.1T};e.4l=6(a){6 b(j,l){O(K m=0;m<j.L;m++)j[m].P+=l}K c=A(a),d,h=1f e.1U.5Y,g=J,i="2F 1H 2Q".1e(" ");I(c!=N){d=1f c;O(K k=0;k<i.L;k++)(6(){K j=i[k];g[j]=6(){H h[j].1p(h,14)}})();d.28==N?1P.1X(e.13.1x.1X+(e.13.1x.4g+a)):h.2J.U({1I:d.28.17,2D:6(j){O(K l=j.17,m=[],s=d.2J,o=j.P+j.18.L,F=d.28,q,G=0;G<s.L;G++){q=y(l,s[G]);b(q,o);m=m.1O(q)}I(F.18!=N&&j.18!=N){q=y(j.18,F.18);b(q,j.P);m=m.1O(q)}I(F.1b!=N&&j.1b!=N){q=y(j.1b,F.1b);b(q,j.P+j[0].5Q(j.1b));m=m.1O(q)}O(j=0;j<m.L;j++)m[j].1V=c.1V;H m}})}};e.4j=6(){};e.4j.Z={V:6(a,b){K c=J.1n[a];c=c==N?b:c;K d={"R":R,"11":11}[c];H d==N?c:d},3Y:6(a){H 1E.4i(a)},4c:6(a,b){K c=[];I(a!=N)O(K d=0;d<a.L;d++)I(1j a[d]=="2m")c=c.1O(y(b,a[d]));H J.4e(c.6b(D))},4e:6(a){O(K b=0;b<a.L;b++)I(a[b]!==N)O(K c=a[b],d=c.P+c.L,h=b+1;h<a.L&&a[b]!==N;h++){K g=a[h];I(g!==N)I(g.P>d)1N;Y I(g.P==c.P&&g.L>c.L)a[b]=N;Y I(g.P>=c.P&&g.P<d)a[h]=N}H a},4d:6(a){K b=[],c=2u(J.V("2i-1s"));v(a,6(d,h){b.U(h+c)});H b},3U:6(a){K b=J.V("1M",[]);I(1j b!="2m"&&b.U==N)b=[b];a:{a=a.1q();K c=3W 0;O(c=c=1Q.6c(c||0,0);c<b.L;c++)I(b[c]==a){b=c;1N a}b=-1}H b!=-1},2r:6(a,b,c){a=["1s","6i"+b,"P"+a,"6r"+(b%2==0?1:2).1q()];J.3U(b)&&a.U("67");b==0&&a.U("1N");H\'<T 1g="\'+a.1K(" ")+\'">\'+c+"</T>"},3Q:6(a,b){K c="",d=a.1e("\\n").L,h=2u(J.V("2i-1s")),g=J.V("2z-1s-2t");I(g==R)g=(h+d-1).1q().L;Y I(3R(g)==R)g=0;O(K i=0;i<d;i++){K k=b?b[i]:h+i,j;I(k==0)j=e.13.1W;Y{j=g;O(K l=k.1q();l.L<j;)l="0"+l;j=l}a=j;c+=J.2r(i,k,a)}H c},49:6(a,b){a=x(a);K c=a.1e("\\n");J.V("2z-1s-2t");K d=2u(J.V("2i-1s"));a="";O(K h=J.V("1D"),g=0;g<c.L;g++){K i=c[g],k=/^(&2s;|\\s)+/.X(i),j=N,l=b?b[g]:d+g;I(k!=N){j=k[0].1q();i=i.1o(j.L);j=j.Q(" ",e.13.1W)}i=x(i);I(i.L==0)i=e.13.1W;a+=J.2r(g,l,(j!=N?\'<17 1g="\'+h+\' 5N">\'+j+"</17>":"")+i)}H a},4f:6(a){H a?"<4a>"+a+"</4a>":""},4b:6(a,b){6 c(l){H(l=l?l.1V||g:g)?l+" ":""}O(K d=0,h="",g=J.V("1D",""),i=0;i<b.L;i++){K k=b[i],j;I(!(k===N||k.L===0)){j=c(k);h+=u(a.1o(d,k.P-d),j+"48")+u(k.1T,j+k.23);d=k.P+k.L+(k.75||0)}}h+=u(a.1o(d),c()+"48");H h},1H:6(a){K b="",c=["20"],d;I(J.V("2k")==R)J.1n.16=J.1n.1u=11;1l="20";J.V("2l")==R&&c.U("47");I((1u=J.V("1u"))==11)c.U("6S");c.U(J.V("1g-27"));c.U(J.V("1D"));a=a.Q(/^[ ]*[\\n]+|[\\n]*[ ]*$/g,"").Q(/\\r/g," ");b=J.V("43-22");I(J.V("42-45")==R)a=n(a,b);Y{O(K h="",g=0;g<b;g++)h+=" ";a=a.Q(/\\t/g,h)}a=a;a:{b=a=a;h=/<2R\\s*\\/?>|&1y;2R\\s*\\/?&1G;/2T;I(e.13.46==R)b=b.Q(h,"\\n");I(e.13.44==R)b=b.Q(h,"");b=b.1e("\\n");h=/^\\s*/;g=4Q;O(K i=0;i<b.L&&g>0;i++){K k=b[i];I(x(k).L!=0){k=h.X(k);I(k==N){a=a;1N a}g=1Q.4q(k[0].L,g)}}I(g>0)O(i=0;i<b.L;i++)b[i]=b[i].1o(g);a=b.1K("\\n")}I(1u)d=J.4d(a);b=J.4c(J.2J,a);b=J.4b(a,b);b=J.49(b,d);I(J.V("41-40"))b=E(b);1j 2H!="1d"&&2H.3S&&2H.3S.1C(/5s/)&&c.U("5t");H b=\'<T 1c="\'+t(J.1c)+\'" 1g="\'+c.1K(" ")+\'">\'+(J.V("16")?e.16.1H(J):"")+\'<3Z 5z="0" 5H="0" 5J="0">\'+J.4f(J.V("1t"))+"<3T><3P>"+(1u?\'<2d 1g="1u">\'+J.3Q(a)+"</2d>":"")+\'<2d 1g="17"><T 1g="3O">\'+b+"</T></2d></3P></3T></3Z></T>"},2F:6(a){I(a===N)a="";J.17=a;K b=J.3Y("T");b.3X=J.1H(a);J.V("16")&&w(p(b,".16"),"5c",e.16.2b);J.V("3V-17")&&w(p(b,".17"),"56",f);H b},2Q:6(a){J.1c=""+1Q.5d(1Q.5n()*5k).1q();e.1Y.2A[t(J.1c)]=J;J.1n=C(e.2v,a||{});I(J.V("2k")==R)J.1n.16=J.1n.1u=11},5j:6(a){a=a.Q(/^\\s+|\\s+$/g,"").Q(/\\s+/g,"|");H"\\\\b(?:"+a+")\\\\b"},5f:6(a){J.28={18:{1I:a.18,23:"1k"},1b:{1I:a.1b,23:"1k"},17:1f M("(?<18>"+a.18.1m+")(?<17>.*?)(?<1b>"+a.1b.1m+")","5o")}}};H e}();1j 2e!="1d"&&(2e.1v=1v);',62,441,'||||||function|||||||||||||||||||||||||||||||||||||return|if|this|var|length|XRegExp|null|for|index|replace|true||div|push|getParam|call|exec|else|prototype||false|lastIndex|config|arguments|RegExp|toolbar|code|left|captureNames|slice|right|id|undefined|split|new|class|addToken|indexOf|typeof|script|className|source|params|substr|apply|toString|String|line|title|gutter|SyntaxHighlighter|_xregexp|strings|lt|html|test|OUTSIDE_CLASS|match|brush|document|target|gt|getHtml|regex|global|join|style|highlight|break|concat|window|Math|isRegExp|throw|value|brushes|brushName|space|alert|vars|http|syntaxhighlighter|expandSource|size|css|case|font|Fa|name|htmlScript|dA|can|handler|gm|td|exports|color|in|href|first|discoveredBrushes|light|collapse|object|cache|getButtonHtml|trigger|pattern|getLineHtml|nbsp|numbers|parseInt|defaults|com|items|www|pad|highlighters|execute|focus|func|all|getDiv|parentNode|navigator|INSIDE_CLASS|regexList|hasFlag|Match|useScriptTags|hasNamedCapture|text|help|init|br|input|gi|Error|values|span|list|250|height|width|screen|top|500|tagName|findElements|getElementsByTagName|aboutDialog|_blank|appendChild|charAt|Array|copyAsGlobal|setFlag|highlighter_|string|attachEvent|nodeName|floor|backref|output|the|TypeError|sticky|Za|iterate|freezeTokens|scope|type|textarea|alexgorbatchev|version|margin|2010|005896|gs|regexLib|body|center|align|noBrush|require|childNodes|DTD|xhtml1|head|org|w3|url|preventDefault|container|tr|getLineNumbersHtml|isNaN|userAgent|tbody|isLineHighlighted|quick|void|innerHTML|create|table|links|auto|smart|tab|stripBrs|tabs|bloggerMode|collapsed|plain|getCodeLinesHtml|caption|getMatchesHtml|findMatches|figureOutLineNumbers|removeNestedMatches|getTitleHtml|brushNotHtmlScript|substring|createElement|Highlighter|load|HtmlScript|Brush|pre|expand|multiline|min|Can|ignoreCase|find|blur|extended|toLowerCase|aliases|addEventListener|innerText|textContent|wasn|select|createTextNode|removeChild|option|same|frame|xmlns|dtd|twice|1999|equiv|meta|htmlscript|transitional|1E3|expected|PUBLIC|DOCTYPE|on|W3C|XHTML|TR|EN|Transitional||configured|srcElement|Object|after|run|dblclick|matchChain|valueOf|constructor|default|switch|click|round|execAt|forHtmlScript|token|gimy|functions|getKeywords|1E6|escape|within|random|sgi|another|finally|supply|MSIE|ie|toUpperCase|catch|returnValue|definition|event|border|imsx|constructing|one|Infinity|from|when|Content|cellpadding|flags|cellspacing|try|xhtml|Type|spaces|2930402|hosted_button_id|lastIndexOf|donate|active|development|keep|to|xclick|_s|Xml|please|like|you|paypal|cgi|cmd|webscr|bin|highlighted|scrollbars|aspScriptTags|phpScriptTags|sort|max|scriptScriptTags|toolbar_item|_|command|command_|number|getElementById|doubleQuotedString|singleLinePerlComments|singleLineCComments|multiLineCComments|singleQuotedString|multiLineDoubleQuotedString|xmlComments|alt|multiLineSingleQuotedString|If|https|1em|000|fff|background|5em|xx|bottom|75em|Gorbatchev|large|serif|CDATA|continue|utf|charset|content|About|family|sans|Helvetica|Arial|Geneva|3em|nogutter|Copyright|syntax|close|write|2004|Alex|open|JavaScript|highlighter|July|02|replaceChild|offset|83'.split('|'),0,{}))
/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
;(function()
{
	// CommonJS
	typeof(require) != 'undefined' ? SyntaxHighlighter = require('shCore').SyntaxHighlighter : null;

	function Brush()
	{
		var keywords =	'break case catch continue ' +
						'default delete do else false  ' +
						'for function if in instanceof ' +
						'new null return super switch ' +
						'this throw true try typeof var while with'
						;

		var r = SyntaxHighlighter.regexLib;
		
		this.regexList = [
			{ regex: r.multiLineDoubleQuotedString,					css: 'string' },			// double quoted strings
			{ regex: r.multiLineSingleQuotedString,					css: 'string' },			// single quoted strings
			{ regex: r.singleLineCComments,							css: 'comments' },			// one line comments
			{ regex: r.multiLineCComments,							css: 'comments' },			// multiline comments
			{ regex: /\s*#.*/gm,									css: 'preprocessor' },		// preprocessor tags like #region and #endregion
			{ regex: new RegExp(this.getKeywords(keywords), 'gm'),	css: 'keyword' }			// keywords
			];
	
		this.forHtmlScript(r.scriptScriptTags);
	};

	Brush.prototype	= new SyntaxHighlighter.Highlighter();
	Brush.aliases	= ['js', 'jscript', 'javascript'];

	SyntaxHighlighter.brushes.JScript = Brush;

	// CommonJS
	typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();

socket=io.connect("www.scinnovation.net:18086");

///GHOST SHOCK FIX
SYSLAB_GS_LOCK_CODEDES_add=0;
SYSLAB_GS_LOCK_INPUTVAR_add=0;






///




SYS_API_MSGBOX_CLOSECB=0;
SYS_API_MSGBOX_TMP=0;
function sys_api_msgbox_hide(){
	var grandgrandmom=_f("#syslab_api_msgbox");
	var grandmom=_f("#syslab_api_msgbox_bg");
	grandmom.style.opacity=0;
	grandmom.style.marginLeft="-200px";
	grandgrandmom.style.opacity=0;
	setTimeout(function(){
		grandgrandmom.style.display="none";
		grandmom.style.marginLeft="200px";
	},600)
}
_f("#syslab_api_msgbox_title_close").addEventListener("click",function(){
	if(SYS_API_MSGBOX_CLOSECB){
		SYS_API_MSGBOX_CLOSECB();
	}
	sys_api_msgbox_hide();
},false)
function sys_api_msgbox(data,title,type,listeners){
	SYS_API_MSGBOX_CLOSECB=0;
	SYSLIB_dom.freshdomcache();
	var grandgrandmom=_f("#syslab_api_msgbox");
	var grandmom=_f("#syslab_api_msgbox_bg");
	var mom=_f("#syslab_api_msgbox_content");
	_f("#syslab_api_msgbox_title_t").innerHTML=title;
	
	switch(type){// 0 info with ok cancle , 1 info with ok only  ,2 big btn chooser
		case 0:
			var opt=SYSLIB_base64.mutilstring(function(){
				/*
					<div class="syslab_api_msgbox_info_1">
						<div class="syslab_api_msgbox_info_1_ico">&#xe016;</div>
						<div class="syslab_api_msgbox_info_1_data">%$1%</div>
						<div class="syslab_api_msgbox_info_btns">
							<div id="syslab_api_msgbox_info_btns_ok" class="syslab_api_landing_cloud_ls_btn">确定</div>
							<div id="syslab_api_msgbox_info_btns_cancle" class="syslab_api_landing_cloud_ls_btn">取消</div>
						</div>
					</div>
				*/
			},[data]);
			mom.innerHTML=opt;
			_f("#syslab_api_msgbox_info_btns_ok").cb=listeners.ok;
			_f("#syslab_api_msgbox_info_btns_cancle").cb=listeners.cancle;
			_f("#syslab_api_msgbox_info_btns_ok").addEventListener("click",function(){sys_api_msgbox_hide();this.cb()},false);
			_f("#syslab_api_msgbox_info_btns_cancle").addEventListener("click",function(){sys_api_msgbox_hide();this.cb()},false);
			SYS_API_MSGBOX_CLOSECB=listeners.cancle;
			break;
		case 1:
			var opt=SYSLIB_base64.mutilstring(function(){
				/*
					<div class="syslab_api_msgbox_info_1">
						<div class="syslab_api_msgbox_info_1_ico">&#xe016;</div>
						<div class="syslab_api_msgbox_info_1_data">%$1%</div>
						<div class="syslab_api_msgbox_info_btns">
							<div id="syslab_api_msgbox_info_btns_ok" class="syslab_api_landing_cloud_ls_btn">确定</div>
						</div>
					</div>
				*/
			},[data]);
			mom.innerHTML=opt;
			_f("#syslab_api_msgbox_info_btns_ok").cb=listeners.ok;
			_f("#syslab_api_msgbox_info_btns_ok").addEventListener("click",function(){sys_api_msgbox_hide();this.cb()},false);
			SYS_API_MSGBOX_CLOSECB=listeners.ok;
			break;
		case 2:
			var opt="";
			for(var i=0;i<data.length;i++){
				opt=opt+SYSLIB_base64.mutilstring(function(){
					/*
						<div id="syslab_api_msgbox_btn_choose_1_%$1%" class="syslab_api_msgbox_btn_choose_1">
							<div class="syslab_api_msgbox_btn_choose_1_t">%$2%</div>
							<div class="syslab_api_msgbox_btn_choose_1_des">%$3%</div>
						</div>
					*/
				},[i,data[i].t,data[i].des]);
			}
			mom.innerHTML=opt;
			for(var i=0;i<data.length;i++){
				_f("#syslab_api_msgbox_btn_choose_1_"+i).cb=listeners[i];
				_f("#syslab_api_msgbox_btn_choose_1_"+i).addEventListener("click",function(){sys_api_msgbox_hide();this.cb()},false);
			}
			break;
	}
	grandgrandmom.style.display="block";
	setTimeout(function(){
		grandgrandmom.style.opacity=1;
		grandmom.style.opacity=1;
		grandmom.style.marginLeft="0px";
	},100)
}
NOW_SYNC_PTYPE=0;
function ppercent(pc){
	if(NOW_SYNC_PTYPE==1){
		NOW_SYNC_PNODE.style.width=pc+"%";
	}else{
		NOW_SYNC_PNODE.innerHTML=pc+"%";
	}
}
NOW_SYNC_PNODE=0;

function sys_api_notice(data,type,time,needobj){
	var newnode=document.createElement('li');
	var pbar='';
	switch(type){// 0 info 1 ok 2 error  3 loading 4 syncing
		case 0:
			var typeclass='';
			var typeicon='&#x6f;';
			break;
		case 1:
			var typeclass='';
			var typeicon='&#x56;';
			break;
		case 2:
			var typeclass='';
			var typeicon='&#x55;';
			break;
		case 3:
			var typeclass='class="syslab_api_loading"';
			var typeicon='&#xe09a;';
			pbar='<div id="notice_pbar"></div>';
			break;
		case 4:
			var typeclass='class="syslab_api_loading"';
			var typeicon='&#xe07b;';
			break;
	}
	newnode.innerHTML='<span '+typeclass+'>'+typeicon+'</span><b>'+data+'</b>'+pbar;
	newnode.style.height="0px";
	newnode.style.opacity=0;
	newnode.removethis=function(){
		this.style.opacity=0;
		var $this=this;
		setTimeout(function(){
			$this.style.height="0px";
			setTimeout(function(){
				$this.parentNode.removeChild($this);
			},600)
		},600)
	}
	_f("#syslab_api_notice").appendChild(newnode);
	
	setTimeout(function(){
		newnode.style.height="40px";
		setTimeout(function(){
			newnode.style.opacity=1;
			if(time){
				setTimeout(function(){newnode.removethis();},time);
			}
		},600)
	},600)
	if(needobj){
		return newnode;
	}
}
_f("#syslab_api_landing_cloud").style.height=(1*window.innerHeight)+"px";
LAND_CLOUD_CHOOSED=0;
_f("#syslab_api_landing_cloud_sm").addEventListener("click",function(){
	_f("#syslab_api_landing_local_big").style.opacity=0;
	_f("#syslab_api_landing_cloud_sm").style.opacity=0;
	setTimeout(function(){
		_f("#syslab_api_landing_local").style.width=(window.innerWidth-150)+"px";
		_f("#syslab_api_landing_local").style.marginLeft=(-1)*(window.innerWidth-300)+"px";
		_f("#syslab_api_landing_cloud").style.width=(window.innerWidth-150)+"px";
		_f("#syslab_api_landing_cloud").style.marginRight="0px";
		
		_f("#syslab_api_landing_local_sm").style.marginRight="100px";
		_f("#syslab_api_landing_local_big").style.marginLeft="-100px";
		_f("#syslab_api_landing_cloud_big").style.display="block";
		_f("#syslab_api_landing_local_sm").style.display="block";
		setTimeout(function(){
			_f("#syslab_api_landing_local_sm").style.opacity=1;
			_f("#syslab_api_landing_cloud_big").style.marginLeft="0px";
			_f("#syslab_api_landing_local_sm").style.marginRight="0px";
			_f("#syslab_api_landing_cloud_big").style.opacity=1;
			_f("#syslab_api_landing_local_big").style.display="none";
			_f("#syslab_api_landing_cloud_sm").style.display="none";
			
		},600);
	},600);
},false)
_f("#syslab_api_landing_local_sm").addEventListener("click",function(){
	if(LAND_CLOUD_CHOOSED){
		LAND_CLOUD_CHOOSED=0;
		_f("#syslab_api_landing_cloud").style.marginTop="0px";
		_f("#syslab_api_landing_cloud_ls").style.opacity=0;
		_f("#syslab_api_landing_cloud").style.height=(1*window.innerHeight)+"px";
		setTimeout(function(){
			_f("#syslab_api_landing_cloud_ls").style.display="none";
			_f("#syslab_api_landing_cloud_ls").style.marginTop="200px";
		},600);
	}
	_f("#syslab_api_landing_cloud_big").style.opacity=0;
	_f("#syslab_api_landing_local_sm").style.opacity=0;
	setTimeout(function(){
			_f("#syslab_api_landing_cloud").style.width=(window.innerWidth-150)+"px";
			_f("#syslab_api_landing_cloud").style.marginRight=(-1)*(window.innerWidth-300)+"px";
			_f("#syslab_api_landing_local").style.width=(window.innerWidth-150)+"px";
			_f("#syslab_api_landing_local").style.marginLeft="0px";
			_f("#syslab_api_landing_cloud_sm").style.marginLeft="100px";
			_f("#syslab_api_landing_cloud_big").style.marginLeft="100px";
			_f("#syslab_api_landing_local_big").style.display="block";
			
			_f("#syslab_api_landing_cloud_sm").style.display="block";
			setTimeout(function(){
				_f("#syslab_api_landing_cloud_sm").style.opacity=1;
				_f("#syslab_api_landing_local_big").style.marginLeft="0px";
				_f("#syslab_api_landing_cloud_sm").style.marginLeft="0px";
				_f("#syslab_api_landing_local_big").style.opacity=1;
				_f("#syslab_api_landing_cloud_big").style.display="none";
				_f("#syslab_api_landing_local_sm").style.display="none";
			},600);
	},600);
},false)
_f("#syslab_api_landing_cloud_sm").click();
setTimeout(function(){
	_f("#syslab_api_landing_cloud").style.opacity=1;
	_f("#syslab_api_landing_local").style.opacity=1;
},1200);
var SYSAPI_MYPJ={};
_f("#syslab_api_landing_local_go").addEventListener("click",function(){NOW_USER_CLOUD=0;show_pjboard();},false)
function show_pjboard(){
	_f("#syslab_api_landing_cloud").style.opacity=0;
	_f("#syslab_api_landing_local").style.opacity=0;
	_f("#syslab_api_landing_cloud").style.marginTop="-200px";
	_f("#syslab_api_landing_local").style.marginTop="-200px";
	setTimeout(function(){
		_f("#syslab_api_landing_cloud").style.display="none";
		_f("#syslab_api_landing_local").style.display="none";
	
		_f("#syslab_api_landing_choosepj").style.display="block";
		_f("#syslab_api_landing_choosepj").style.opacity=1;
		
		autoload("list.sysapi.bin",function(data){
			if(!data){
				SYSAPI_MYPJ={data:{},time:0};
				_f("#syslab_api_landing_choosepj_list").innerHTML="<div class='syslab_api_landing_choosepj_list_empty'>还没有文档,哦快去添加一个吧</div>";
			}else{
				SYSAPI_MYPJ=unescape(SYSLIB_base64.decode(data));
				SYSAPI_MYPJ=JSON.parse(SYSAPI_MYPJ);
				if(!SYSAPI_MYPJ.data){
					_f("#syslab_api_landing_choosepj_list").innerHTML="<div class='syslab_api_landing_choosepj_list_empty'>还没有文档,哦快去添加一个吧</div>";
					return;
				}
				var tmpp=0;
				var opt="";
				for(tmpp in SYSAPI_MYPJ.data){
					var tmpa=SYSAPI_MYPJ.data[tmpp];
					var mtime=(tmpa.mtime==0)?"未修改":(new Date(tmpa.mtime)).toLocaleString();
					opt=opt+SYSLIB_base64.mutilstring(function(){
						/*
							<div class="syslab_api_landing_choosepj_listitem" name="%$1%" onclick="syslab_api_landing_choosepj_choose(this);" automtime="%$7%">
								<div class="syslab_api_landing_choosepj_name">%$2%</div>
								<div class="syslab_api_landing_choosepj_ctime">创建于:<b>%$3%</b></div>
								<div class="syslab_api_landing_choosepj_apiver"><span>&#x3b;</span>%$5%</div>
								<div class="syslab_api_landing_choosepj_rev"><span>&#x68;</span>%$6%</div>
								<div class="syslab_api_landing_choosepj_mtime">修改于:<b>%$4%</b></div>
							</div>
						*/
					},[tmpa.id,tmpa.name,(new Date(tmpa.ctime)).toLocaleString(),mtime,tmpa.apiver,tmpa.rev,((tmpa.automtime>tmpa.mtime)?1:0)])
				}
				if(opt==""){
					_f("#syslab_api_landing_choosepj_list").innerHTML="<div class='syslab_api_landing_choosepj_list_empty'>还没有文档,哦快去添加一个吧</div>";
					return;
				}
				_f("#syslab_api_landing_choosepj_list").innerHTML=opt;
			}
			
		})
		//_f("#syslab_api_landing").style.display="none";
	},600);
}
_f("#syslab_api_landing_choosepj_addbtn").addEventListener("click",function(){
	_f("#syslab_api_landing_choosepj_list").style.marginLeft="-200px";
	_f("#syslab_api_landing_choosepj_list").style.opacity=0;
	_f("#syslab_api_landing_choosepj_add").style.marginLeft="0px";
	_f("#syslab_api_landing_choosepj_add").style.opacity=1;
	_f("#syslab_api_landing_choosepj_add").style.display="block";
	setTimeout(function(){
		_f("#syslab_api_landing_choosepj_list").style.diaplay="none";
	},600);
},false)
_f("#syslab_api_landing_choosepj_add_cancle").addEventListener("click",function(){
	_f("#syslab_api_landing_choosepj_list").style.marginLeft="0px";
	_f("#syslab_api_landing_choosepj_list").style.opacity=1;
	_f("#syslab_api_landing_choosepj_add").style.marginLeft="200px";
	_f("#syslab_api_landing_choosepj_add").style.opacity=0;
	_f("#syslab_api_landing_choosepj_list").style.diaplay="block";
	setTimeout(function(){
		_f("#syslab_api_landing_choosepj_add").style.diaplay="none";
	},600);
},false)
_f("#syslab_api_landing_choosepj_add_go").addEventListener("click",function(){
	var pjname=_f("#syslab_api_landing_choosepj_add_name").value;
	var pjapiver=_f("#syslab_api_landing_choosepj_add_apiver").value;
	if(!pjname||!pjapiver){
		//alert("文档名或api版本不能为空");
		sys_api_msgbox("文档名或api版本不能为空","提示",1,{
			ok:function(){}
		})
		return;
	}
	var pjid="";
	while(pjid=SYSLIB_token.get()){
		if(!SYSAPI_MYPJ.data[pjid]){
			break;
		}
	}
	var pjinfo={
					name:pjname,
					apiver:parseInt(pjapiver),
					rev:0,
					mtime:0,
					ctime:(new Date()).getTime(),
					automtime:0,
					id:pjid
				}
	SYSAPI_MYPJ.data[pjid]=pjinfo;
	_f("#syslab_api_landing_choosepj").style.marginTop="-200px";
	_f("#syslab_api_landing_choosepj").style.opacity=0;
	setTimeout(function(){
		_f("#syslab_api_landing_choosepj").style.display="none";
		_f("#syslab_api_loading").style.display="block";
		_f("#syslab_api_loading").style.opacity=1;
		open_load(pjid,1,pjinfo);
		save_manual();
	},600);
},false)
function syslab_api_landing_choosepj_choose(node){
	if(SYSLAB_CHOOSEPJ_CHOOSED){
		_c(SYSLAB_CHOOSEPJ_CHOOSED).remove("syslab_api_landing_choosepj_list_choosed");
	}
	if(SYSLAB_CHOOSEPJ_CHOOSED==node){
		SYSLAB_CHOOSEPJ_CHOOSED=0;
		return;
	}
	SYSLAB_CHOOSEPJ_CHOOSED=node;
	_c(SYSLAB_CHOOSEPJ_CHOOSED).add("syslab_api_landing_choosepj_list_choosed");
}
SYSLAB_CHOOSEPJ_CHOOSED=0;
_f("#syslab_api_landing_choosepj_go").addEventListener("click",function(){
	if(!SYSLAB_CHOOSEPJ_CHOOSED){
		//alert("请选择文档");
		sys_api_msgbox("请选择文档","提示",1,{
			ok:function(){}
		})
		return;
	}
	var name=SYSLAB_CHOOSEPJ_CHOOSED.getAttribute("name");
	var hasautosave=SYSLAB_CHOOSEPJ_CHOOSED.getAttribute("automtime");
	if(hasautosave&&hasautosave==1){
		/*if(confirm("存在比手动保存的版本更新的自动存档，需要载入么？")){
			
		}else{
			open_load(name,0,0);
		}*/
		sys_api_msgbox("存在比手动保存的版本更新的自动存档，需要载入么？","提示",0,{
			ok:function(){
				var name=SYSLAB_CHOOSEPJ_CHOOSED.getAttribute("name");
				open_load(name,0,0,1);
			},
			cancle:function(){
				var name=SYSLAB_CHOOSEPJ_CHOOSED.getAttribute("name");
				open_load(name,0,0);
			},
		})
	}else{
		open_load(name,0,0);
	}
},false)
_f("#syslab_api_landing_choosepj_logout").addEventListener("click",function(){
		/*if(confirm("确定注销登陆么？")){
			SYSLIB_cookies.clean("SYS_API_USER");
			window.location.reload();
		}*/
		sys_api_msgbox("确定注销登陆么？","提示",0,{
			ok:function(){
				SYSLIB_cookies.clean("SYS_API_USER");
				window.location.reload();
			},
			cancle:function(){
				
			},
		})
},false)
_f("#syslab_api_landing_choosepj_del").addEventListener("click",function(){
	if(!SYSLAB_CHOOSEPJ_CHOOSED){
		//alert("请选择文档");
		sys_api_msgbox("请选择文档","提示",1,{
			ok:function(){}
		})
		return;
	}
	sys_api_msgbox("确定删除这个文档  ?<br/>删除操作不可恢复","提示",0,{
		ok:function(){
			var name=SYSLAB_CHOOSEPJ_CHOOSED.getAttribute("name");
		  	//removefile(name+".tmp.sysapi.bin");
			removefile(name+".sysapi.bin");
			delete SYSAPI_MYPJ.data[name];
			setTimeout(function(){
				save("list.sysapi.bin",0,{data:SYSAPI_MYPJ.data,time:(new Date()).getTime()},1);
				setTimeout(function(){
					sys_api_notice("文档已删除",1,3000)
				},1000)
			},1000)
			window.location.reload();
		},
		cancle:function(){
			
		},
	})
		/*(confirm("真的确定删除  [删除操作不可恢复]?")){
			var name=SYSLAB_CHOOSEPJ_CHOOSED.getAttribute("name");
		  	//removefile(name+".tmp.sysapi.bin");
			removefile(name+".sysapi.bin");
			delete SYSAPI_MYPJ.data[name];
			setTimeout(function(){
				save("list.sysapi.bin",0,{data:SYSAPI_MYPJ.data,time:(new Date()).getTime()},1);
				setTimeout(function(){
					sys_api_notice("文档已删除",1,3000)
				},1000)
			},1000)
			window.location.reload();
		}*/
	
},false)
function open_load(pjid,skiploadfile,pjinfo,auto){
	var loadeddata=function(data){
		APIDOC=data;
		parse_APIDOC(APIDOC);
	}
	if(skiploadfile){
		loadeddata({
			project:pjinfo,
			data:[]
		});
		return;
	}
	var filetoload=pjid;
	if(auto){
		filetoload=filetoload+".tmp.sysapi.bin";
	}else{
		filetoload=filetoload+".sysapi.bin";
	}
	autoload(filetoload,function(data){
		data=unescape(SYSLIB_base64.decode(data));
		data=JSON.parse(data);
		loadeddata(data);
	});
}
           


_f("#syslab_api_landing_cloud_go").addEventListener("click",function(){
	NOW_USER_CLOUD=1;
	LAND_CLOUD_CHOOSED=1;
	_f("#syslab_api_landing_cloud").style.height=(2*window.innerHeight)+"px";
	_f("#syslab_api_landing_cloud").style.marginTop=(-1*window.innerHeight)+"px";
	_f("#syslab_api_landing_cloud_ls").style.top=(window.innerHeight)+"px";
	_f("#syslab_api_landing_cloud_ls").style.display="block";
	if(SERVER_CONNECTED){
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="";
		_f("#syslab_api_landing_cloud_ls_notice").style.display="none";
	}else{
		_f("#syslab_api_landing_cloud_ls_notice").style.display="block";
		
		_f("#syslab_api_landing_cloud_ls_ips_pass").disabled=true;
		_f("#syslab_api_landing_cloud_ls_ips_email").disabled=true;
		_f("#syslab_api_landing_cloud_ls_ips").style.opacity=0;
		_f("#syslab_api_landing_cloud_ls_login_go").style.opacity=0;
		_f("#syslab_api_landing_cloud_ls_signup_go").style.opacity=0;
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>无法连接至服务器";
	}
	if(NOW_USER_SIGNED){
		_f("#syslab_api_landing_cloud_ls_notice").style.display="block";
		_f("#syslab_api_landing_cloud_ls_notice").style.color="#0f0";
		_f("#syslab_api_landing_cloud_ls_ips_pass").disabled=true;
		_f("#syslab_api_landing_cloud_ls_ips_email").disabled=true;
		_f("#syslab_api_landing_cloud_ls_ips").style.opacity=0;
		_f("#syslab_api_landing_cloud_ls_login_go").style.opacity=0;
		_f("#syslab_api_landing_cloud_ls_signup_go").style.opacity=0;
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span class='syslab_api_loading'>&#xe07b;</span>自动登录成功,正在同步数据 <b id='notice_ptext'></b>";
		setTimeout(function(){
			NOW_SYNC_PNODE=_f("#notice_ptext");
			NOW_SYNC_PTYPE=2;
			sync_datas(function(){
				_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x33;</span>同步成功";
				setTimeout(show_pjboard,2000);
			});
		},2000);
	}
	setTimeout(function(){
		_f("#syslab_api_landing_cloud_ls").style.opacity=1;
		_f("#syslab_api_landing_cloud_ls").style.marginTop="0px";
	},600);
	
},false)
_f("#syslab_api_landing_cloud_ls_login_go").addEventListener("click",function(){
	if(NOW_USER_SIGNED){
		return;
	}
	_f("#syslab_api_landing_cloud_ls_notice").style.display="block";
	if(!SERVER_CONNECTED){
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>无法连接至服务器";
		return;
	}
	var uname=_f("#syslab_api_landing_cloud_ls_ips_email").value;
	var upass=_f("#syslab_api_landing_cloud_ls_ips_pass").value;
	if(!uname||!upass){
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>邮箱、密码 不能为空";
		return;
	}
	if(!_is(uname,"email")){
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>请使用有效的邮箱";
		return;
	}
	if(!_is(upass,"sysupass")){
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>密码限 6-64 位允许 大小写字母、数字、部分特殊字符";
		return;
	}
	var TMP_UTOKEN=SYSLIB_token.get();
	socket.emit('login', { "uname": uname,"upass":upass,"utoken":TMP_UTOKEN});
},false)
_f("#syslab_api_landing_cloud_ls_signup_go").addEventListener("click",function(){
	if(NOW_USER_SIGNED){
		return;
	}
	_f("#syslab_api_landing_cloud_ls_notice").style.display="block";
	if(!SERVER_CONNECTED){
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>无法连接至服务器";
		return;
	}
	var uname=_f("#syslab_api_landing_cloud_ls_ips_email").value;
	var upass=_f("#syslab_api_landing_cloud_ls_ips_pass").value;
	if(!uname||!upass){
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>邮箱、密码 不能为空";
		return;
	}
	if(!_is(uname,"email")){
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>请使用有效的邮箱";
		return;
	}
	if(!_is(upass,"sysupass")){
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>密码限 6-64 位允许 大小写字母、数字、部分特殊字符";
		return;
	}
	var TMP_UTOKEN=SYSLIB_token.get();
	socket.emit('signup', { "uname": uname,"upass":upass,"utoken":TMP_UTOKEN});
},false)

socket.on('login', function (data) {
	if(data.statue=="ok"){
		NOW_USER={
			uname:data.uname,
			uid:data.uid,
			utoken:data.utoken,
			stoken:data.stoken
		}
		NOW_USER_SIGNED=1;
		saveuser();
		_f("#syslab_api_landing_cloud_ls_notice").style.color="#0f0";
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span class='syslab_api_loading'>&#xe07b;</span>登录成功,正在同步数据 <b id='notice_ptext'></b>";
		setTimeout(function(){
			NOW_SYNC_PNODE=_f("#notice_ptext");
			NOW_SYNC_PTYPE=2;
			sync_datas(function(){
				_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x33;</span>同步成功";
				setTimeout(show_pjboard,2000);
			});
		},2000);
	}else{
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>登录失败，请检查邮箱和密码";
	}
});

socket.on('signup', function (data) {
	if(data.statue=="ok"){
		NOW_USER={
			uname:data.uname,
			uid:data.uid,
			utoken:data.utoken,
			stoken:data.stoken
		}
		NOW_USER_SIGNED=1;
		saveuser();
		_f("#syslab_api_landing_cloud_ls_notice").style.color="#0f0";
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x33;</span>注册成功";
		show_pjboard();
	}else{
		_f("#syslab_api_landing_cloud_ls_notice").innerHTML="<span>&#x32;</span>注册失败，请更换邮箱";
	}
});





_f("#syslab_api_plbg_des").style.width=(window.innerWidth-300)+"px";
_f("#syslab_api_plbg_des").style.height=(window.innerHeight)+"px";

_f("#syslab_api_plbg_apis_search").style.height=(window.innerHeight-70)+"px";
_f("#syslab_api_plbg_apis").style.height=(window.innerHeight-70)+"px";
_f("#syslab_api_plbg_fold").style.height=_f("#syslab_api_plbg_fold").style.paddingTop=(window.innerHeight-40)/2+"px";


IS_EDIT_MOD=0;
TOOLBOX_HIDE=0;
window.addEventListener("mousemove",function(e){
	if(e.clientX<(window.innerWidth*0.8)&&TOOLBOX_HIDE==0){
		TOOLBOX_HIDE=1;
		_f("#syslab_api_toolbox").className="syslab_api_toolbox_hide";
		_f("#syslab_api_toolbox_sl").className="syslab_api_toolbox_hide";
	}else if(e.clientX>=(window.innerWidth*0.8)&&TOOLBOX_HIDE==1){
		TOOLBOX_HIDE=0;
		_f("#syslab_api_toolbox").className="syslab_api_toolbox_show";
		_f("#syslab_api_toolbox_sl").className="syslab_api_toolbox_show";
	}
},false);




API_P_FOLD=0;
LAST_API_P_WIDTH=300;
_f("#syslab_api_plbg_fold").addEventListener("click",function(){
	if(API_P_FOLD){
		API_P_FOLD=0;
		this.innerHTML="&#x3e;";
		_f("#syslab_api_plbg").style.marginLeft="0px";
		_f("#syslab_api_plbg_des").style.width=(window.innerWidth-300)+"px";
	}else{
		API_P_FOLD=1;
		this.innerHTML="&#x3d;";
		_f("#syslab_api_plbg").style.marginLeft=(-1)*(LAST_API_P_WIDTH-20)+"px";
		_f("#syslab_api_plbg_des").style.width=(window.innerWidth-20)+"px";
	}
},false);
_f("#syslab_api_plbg_des_edit").addEventListener("click",function(){
	if(IS_EDIT_MOD){
		IS_EDIT_MOD=0;
		this.className="syslab_api_plbg_des_edit_off";
		_f("#syslab_api_plbg_des").className="syslab_api_edit_off";
	}else{
		IS_EDIT_MOD=1;
		this.className="syslab_api_plbg_des_edit_on";
		_f("#syslab_api_plbg_des").className="syslab_api_edit_on";
	}
},false);
syslab_api_toolbox_to_top_lock=0;
_f("#syslab_api_toolbox_to_top").addEventListener("click",function(){
	if(syslab_api_toolbox_to_top_lock){
		return;
	}
	syslab_api_toolbox_to_top_lock=1;
	var dst=_f("#syslab_api_plbg_des").scrollTop;
	var kick=setInterval(function(){
		var changeval=(0.1*dst);
		changeval=(changeval>20)?20:changeval;
		dst-=changeval;
		
		
		if(dst<=1){
			dst=0;
			syslab_api_toolbox_to_top_lock=0;
			clearTimeout(kick);
		}
		_f("#syslab_api_plbg_des").scrollTop=dst;
	},20)
	_f("#syslab_api_plbg_des").scrollTop=0;
},false);
function genprintpage(){
	var flat=[];
	var parsetoflat=function(data,wname){
		if(data.isapi){
			flat.push({
				name:(wname)?(wname+"."+data.name):data.name,
				admin:data.admin,
				code:data.code,
				des:data.des,
				get:data.get,
				isapi:data.isapi,
				jsonp:data.jsonp,
				login:data.login,
				note:data.note,
				post:data.post,
				codedes:data.codedes,
				req:data.req,
				request:data.request
			});
		}else{
			flat.push({
				name:(wname)?(wname+"."+data.name):data.name,
				des:data.des,
				isapi:data.isapi
			});
		}
		wname=(wname)?(wname+"."+data.name):data.name;
		if(data.child){
			for(var i=0;i<data.child.length;i++){
				parsetoflat(data.child[i],wname);
			}
		}
	}
	for(var i=0;i<APIDOC.data.length;i++){
		parsetoflat(APIDOC.data[i]);
	}
	var apidatas='';
	for(var i=0;i<flat.length;i++){
		var tmpdata=flat[i];
		var iptvars='';
		if(!tmpdata.isapi){
			apidatas=apidatas+SYSLIB_base64.mutilstring(function(){
				/*
					<div class="sysapi_print_api">
						<div class="sysapi_print_api_title">%$1%</div>
						<div class="sysapi_print_api_des">%$2%</div>
					</div>
				*/
			},[tmpdata.name,tmpdata.des]);
			continue;
		}		
		for(var j=0;j<tmpdata.req.length;j++){
			var myclass=(j%2==0)?"class='bgb'":"";
			iptvars=iptvars+SYSLIB_base64.mutilstring(function(){
				/*
					<tr %$1%>
					  <td>%$2%</td>
					  <td>%$3%</td>
					  <td>%$4%</td>
					  <td>%$5%</td>
					</tr>
				*/
			},[myclass,tmpdata.req[j].n,tmpdata.req[j].m,tmpdata.req[j].t,tmpdata.req[j].des]);
		}
		iptvars=(iptvars)?SYSLIB_base64.mutilstring(function(){
			/*
				<table class="sysapi_print_infobox_table no_border_table" width="600px" border="1">
					<tr>
					  <td>字段</td>
					  <td>必选</td>
					  <td>类型</td>
					  <td>说明</td>
					</tr>
			*/
		})+iptvars+"</table>":"没有传入参数";
		var codedes='';
		for(var j=0;j<tmpdata.codedes.length;j++){
			var myclass=(j%2==0)?"class='bgb'":"";
			codedes=codedes+SYSLIB_base64.mutilstring(function(){
				/*
					<tr %$1%>
					  <td>%$2%</td>
					  <td>%$3%</td>
					  <td>%$4%</td>
					</tr>
				*/
			},[myclass,tmpdata.codedes[j].n,tmpdata.codedes[j].t,tmpdata.codedes[j].des]);
		}
		codedes=(codedes)?SYSLIB_base64.mutilstring(function(){
			/*
				<table class="sysapi_print_infobox_table no_border_table" width="600px" border="1">
					<tr>
					  <td>字段</td>
					  <td>类型</td>
					  <td>说明</td>
					</tr>
			*/
		})+codedes+"</table>":"没有返回值说明";
		apidatas=apidatas+SYSLIB_base64.mutilstring(function(){
		/*
			<div class="sysapi_print_api">
				<div class="sysapi_print_api_title">%$1%<span>SYS API Panel</span></div>
				<div class="sysapi_print_api_des">%$2%</div>
				<div class="sysapi_print_api_sm">
					<div class="sysapi_print_api_smtitle"></div>
					<div class="sysapi_print_api_opt">
						<center>
								<table class="sysapi_print_infobox_table no_border_table" width="600px" border="1">
								  <tr>
									<td>登录认证</td>
									<td>%$3%</td>
								  </tr>
								  <tr class="bgb">
									<td>管理权限</td>
									<td>%$4%</td>
								  </tr>
								  <tr>
									<td>POST</td>
									<td>%$5%</td>
								  </tr>
								  <tr class="bgb">
									<td>GET</td>
									<td>%$6%</td>
								  </tr>
								  <tr>
									<td>JSONP</td>
									<td>%$7%</td>
								  </tr>
								  <tr class="bgb">
									<td>请求格式</td>
									<td>%$8%</td>
								  </tr>
								</table>
						</center>
					</div>
				 </div>
				 <div class="sysapi_print_api_sm">
					 <div class="sysapi_print_api_smtitle">请求参数<span>SYS API Panel</span></div>
					 <div class="sysapi_print_api_iptvar">
						<center>%$9%</table>
						</center>
					</div>
				</div>
				 <div class="sysapi_print_api_sm">
					<div class="sysapi_print_api_smtitle">返回结果<span>SYS API Panel</span></div>
					<div class="sysapi_print_api_code">
					<pre class="brush: js">%$10%</pre>
					</div>
				</div>
				<div class="sysapi_print_api_sm">
					  <div class="sysapi_print_api_smtitle">返回字段说明<span>SYS API Panel</span></div>
					  <div class="sysapi_print_api_codedes">
						  <center>%$11%</center>
					  </div>
				</div>
				<div class="sysapi_print_api_sm">
					  <div class="sysapi_print_api_smtitle">说明<span>SYS API Panel</span></div>
					  <div class="sysapi_print_api_moredes">%$12%</div>
				</div>
			</div>
			*/
		},[tmpdata.name,tmpdata.des,(tmpdata.login)?"True":"False",(tmpdata.admin)?"True":"False",(tmpdata.post)?"True":"False",(tmpdata.get)?"True":"False",(tmpdata.jsonp)?"True":"False",tmpdata.request,iptvars,flat[i].code,codedes,flat[i].note]);
	}
	var syntaxcode=SYSLIB_base64.mutilstring(function(){
		/*
			eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('K M;I(M)1S 2U("2a\'t 4k M 4K 2g 3l 4G 4H");(6(){6 r(f,e){I(!M.1R(f))1S 3m("3s 15 4R");K a=f.1w;f=M(f.1m,t(f)+(e||""));I(a)f.1w={1m:a.1m,19:a.19?a.19.1a(0):N};H f}6 t(f){H(f.1J?"g":"")+(f.4s?"i":"")+(f.4p?"m":"")+(f.4v?"x":"")+(f.3n?"y":"")}6 B(f,e,a,b){K c=u.L,d,h,g;v=R;5K{O(;c--;){g=u[c];I(a&g.3r&&(!g.2p||g.2p.W(b))){g.2q.12=e;I((h=g.2q.X(f))&&h.P===e){d={3k:g.2b.W(b,h,a),1C:h};1N}}}}5v(i){1S i}5q{v=11}H d}6 p(f,e,a){I(3b.Z.1i)H f.1i(e,a);O(a=a||0;a<f.L;a++)I(f[a]===e)H a;H-1}M=6(f,e){K a=[],b=M.1B,c=0,d,h;I(M.1R(f)){I(e!==1d)1S 3m("2a\'t 5r 5I 5F 5B 5C 15 5E 5p");H r(f)}I(v)1S 2U("2a\'t W 3l M 59 5m 5g 5x 5i");e=e||"";O(d={2N:11,19:[],2K:6(g){H e.1i(g)>-1},3d:6(g){e+=g}};c<f.L;)I(h=B(f,c,b,d)){a.U(h.3k);c+=h.1C[0].L||1}Y I(h=n.X.W(z[b],f.1a(c))){a.U(h[0]);c+=h[0].L}Y{h=f.3a(c);I(h==="[")b=M.2I;Y I(h==="]")b=M.1B;a.U(h);c++}a=15(a.1K(""),n.Q.W(e,w,""));a.1w={1m:f,19:d.2N?d.19:N};H a};M.3v="1.5.0";M.2I=1;M.1B=2;K C=/\\$(?:(\\d\\d?|[$&`\'])|{([$\\w]+)})/g,w=/[^5h]+|([\\s\\S])(?=[\\s\\S]*\\1)/g,A=/^(?:[?*+]|{\\d+(?:,\\d*)?})\\??/,v=11,u=[],n={X:15.Z.X,1A:15.Z.1A,1C:1r.Z.1C,Q:1r.Z.Q,1e:1r.Z.1e},x=n.X.W(/()??/,"")[1]===1d,D=6(){K f=/^/g;n.1A.W(f,"");H!f.12}(),y=6(){K f=/x/g;n.Q.W("x",f,"");H!f.12}(),E=15.Z.3n!==1d,z={};z[M.2I]=/^(?:\\\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S]))/;z[M.1B]=/^(?:\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\\d*|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S])|\\(\\?[:=!]|[?*+]\\?|{\\d+(?:,\\d*)?}\\??)/;M.1h=6(f,e,a,b){u.U({2q:r(f,"g"+(E?"y":"")),2b:e,3r:a||M.1B,2p:b||N})};M.2n=6(f,e){K a=f+"/"+(e||"");H M.2n[a]||(M.2n[a]=M(f,e))};M.3c=6(f){H r(f,"g")};M.5l=6(f){H f.Q(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,"\\\\$&")};M.5e=6(f,e,a,b){e=r(e,"g"+(b&&E?"y":""));e.12=a=a||0;f=e.X(f);H b?f&&f.P===a?f:N:f};M.3q=6(){M.1h=6(){1S 2U("2a\'t 55 1h 54 3q")}};M.1R=6(f){H 53.Z.1q.W(f)==="[2m 15]"};M.3p=6(f,e,a,b){O(K c=r(e,"g"),d=-1,h;h=c.X(f);){a.W(b,h,++d,f,c);c.12===h.P&&c.12++}I(e.1J)e.12=0};M.57=6(f,e){H 6 a(b,c){K d=e[c].1I?e[c]:{1I:e[c]},h=r(d.1I,"g"),g=[],i;O(i=0;i<b.L;i++)M.3p(b[i],h,6(k){g.U(d.3j?k[d.3j]||"":k[0])});H c===e.L-1||!g.L?g:a(g,c+1)}([f],0)};15.Z.1p=6(f,e){H J.X(e[0])};15.Z.W=6(f,e){H J.X(e)};15.Z.X=6(f){K e=n.X.1p(J,14),a;I(e){I(!x&&e.L>1&&p(e,"")>-1){a=15(J.1m,n.Q.W(t(J),"g",""));n.Q.W(f.1a(e.P),a,6(){O(K c=1;c<14.L-2;c++)I(14[c]===1d)e[c]=1d})}I(J.1w&&J.1w.19)O(K b=1;b<e.L;b++)I(a=J.1w.19[b-1])e[a]=e[b];!D&&J.1J&&!e[0].L&&J.12>e.P&&J.12--}H e};I(!D)15.Z.1A=6(f){(f=n.X.W(J,f))&&J.1J&&!f[0].L&&J.12>f.P&&J.12--;H!!f};1r.Z.1C=6(f){M.1R(f)||(f=15(f));I(f.1J){K e=n.1C.1p(J,14);f.12=0;H e}H f.X(J)};1r.Z.Q=6(f,e){K a=M.1R(f),b,c;I(a&&1j e.58()==="3f"&&e.1i("${")===-1&&y)H n.Q.1p(J,14);I(a){I(f.1w)b=f.1w.19}Y f+="";I(1j e==="6")c=n.Q.W(J,f,6(){I(b){14[0]=1f 1r(14[0]);O(K d=0;d<b.L;d++)I(b[d])14[0][b[d]]=14[d+1]}I(a&&f.1J)f.12=14[14.L-2]+14[0].L;H e.1p(N,14)});Y{c=J+"";c=n.Q.W(c,f,6(){K d=14;H n.Q.W(e,C,6(h,g,i){I(g)5b(g){24"$":H"$";24"&":H d[0];24"`":H d[d.L-1].1a(0,d[d.L-2]);24"\'":H d[d.L-1].1a(d[d.L-2]+d[0].L);5a:i="";g=+g;I(!g)H h;O(;g>d.L-3;){i=1r.Z.1a.W(g,-1)+i;g=1Q.3i(g/10)}H(g?d[g]||"":"$")+i}Y{g=+i;I(g<=d.L-3)H d[g];g=b?p(b,i):-1;H g>-1?d[g+1]:h}})})}I(a&&f.1J)f.12=0;H c};1r.Z.1e=6(f,e){I(!M.1R(f))H n.1e.1p(J,14);K a=J+"",b=[],c=0,d,h;I(e===1d||+e<0)e=5D;Y{e=1Q.3i(+e);I(!e)H[]}O(f=M.3c(f);d=f.X(a);){I(f.12>c){b.U(a.1a(c,d.P));d.L>1&&d.P<a.L&&3b.Z.U.1p(b,d.1a(1));h=d[0].L;c=f.12;I(b.L>=e)1N}f.12===d.P&&f.12++}I(c===a.L){I(!n.1A.W(f,"")||h)b.U("")}Y b.U(a.1a(c));H b.L>e?b.1a(0,e):b};M.1h(/\\(\\?#[^)]*\\)/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"});M.1h(/\\((?!\\?)/,6(){J.19.U(N);H"("});M.1h(/\\(\\?<([$\\w]+)>/,6(f){J.19.U(f[1]);J.2N=R;H"("});M.1h(/\\\\k<([\\w$]+)>/,6(f){K e=p(J.19,f[1]);H e>-1?"\\\\"+(e+1)+(3R(f.2S.3a(f.P+f[0].L))?"":"(?:)"):f[0]});M.1h(/\\[\\^?]/,6(f){H f[0]==="[]"?"\\\\b\\\\B":"[\\\\s\\\\S]"});M.1h(/^\\(\\?([5A]+)\\)/,6(f){J.3d(f[1]);H""});M.1h(/(?:\\s+|#.*)+/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"},M.1B,6(){H J.2K("x")});M.1h(/\\./,6(){H"[\\\\s\\\\S]"},M.1B,6(){H J.2K("s")})})();1j 2e!="1d"&&(2e.M=M);K 1v=6(){6 r(a,b){a.1l.1i(b)!=-1||(a.1l+=" "+b)}6 t(a){H a.1i("3e")==0?a:"3e"+a}6 B(a){H e.1Y.2A[t(a)]}6 p(a,b,c){I(a==N)H N;K d=c!=R?a.3G:[a.2G],h={"#":"1c",".":"1l"}[b.1o(0,1)]||"3h",g,i;g=h!="3h"?b.1o(1):b.5u();I((a[h]||"").1i(g)!=-1)H a;O(a=0;d&&a<d.L&&i==N;a++)i=p(d[a],b,c);H i}6 C(a,b){K c={},d;O(d 2g a)c[d]=a[d];O(d 2g b)c[d]=b[d];H c}6 w(a,b,c,d){6 h(g){g=g||1P.5y;I(!g.1F){g.1F=g.52;g.3N=6(){J.5w=11}}c.W(d||1P,g)}a.3g?a.3g("4U"+b,h):a.4y(b,h,11)}6 A(a,b){K c=e.1Y.2j,d=N;I(c==N){c={};O(K h 2g e.1U){K g=e.1U[h];d=g.4x;I(d!=N){g.1V=h.4w();O(g=0;g<d.L;g++)c[d[g]]=h}}e.1Y.2j=c}d=e.1U[c[a]];d==N&&b!=11&&1P.1X(e.13.1x.1X+(e.13.1x.3E+a));H d}6 v(a,b){O(K c=a.1e("\\n"),d=0;d<c.L;d++)c[d]=b(c[d],d);H c.1K("\\n")}6 u(a,b){I(a==N||a.L==0||a=="\\n")H a;a=a.Q(/</g,"&1y;");a=a.Q(/ {2,}/g,6(c){O(K d="",h=0;h<c.L-1;h++)d+=e.13.1W;H d+" "});I(b!=N)a=v(a,6(c){I(c.L==0)H"";K d="";c=c.Q(/^(&2s;| )+/,6(h){d=h;H""});I(c.L==0)H d;H d+\'<17 1g="\'+b+\'">\'+c+"</17>"});H a}6 n(a,b){a.1e("\\n");O(K c="",d=0;d<50;d++)c+="                    ";H a=v(a,6(h){I(h.1i("\\t")==-1)H h;O(K g=0;(g=h.1i("\\t"))!=-1;)h=h.1o(0,g)+c.1o(0,b-g%b)+h.1o(g+1,h.L);H h})}6 x(a){H a.Q(/^\\s+|\\s+$/g,"")}6 D(a,b){I(a.P<b.P)H-1;Y I(a.P>b.P)H 1;Y I(a.L<b.L)H-1;Y I(a.L>b.L)H 1;H 0}6 y(a,b){6 c(k){H k[0]}O(K d=N,h=[],g=b.2D?b.2D:c;(d=b.1I.X(a))!=N;){K i=g(d,b);I(1j i=="3f")i=[1f e.2L(i,d.P,b.23)];h=h.1O(i)}H h}6 E(a){K b=/(.*)((&1G;|&1y;).*)/;H a.Q(e.3A.3M,6(c){K d="",h=N;I(h=b.X(c)){c=h[1];d=h[2]}H\'<a 2h="\'+c+\'">\'+c+"</a>"+d})}6 z(){O(K a=1E.36("1k"),b=[],c=0;c<a.L;c++)a[c].3s=="20"&&b.U(a[c]);H b}6 f(a){a=a.1F;K b=p(a,".20",R);a=p(a,".3O",R);K c=1E.4i("3t");I(!(!a||!b||p(a,"3t"))){B(b.1c);r(b,"1m");O(K d=a.3G,h=[],g=0;g<d.L;g++)h.U(d[g].4z||d[g].4A);h=h.1K("\\r");c.39(1E.4D(h));a.39(c);c.2C();c.4C();w(c,"4u",6(){c.2G.4E(c);b.1l=b.1l.Q("1m","")})}}I(1j 3F!="1d"&&1j M=="1d")M=3F("M").M;K e={2v:{"1g-27":"","2i-1s":1,"2z-1s-2t":11,1M:N,1t:N,"42-45":R,"43-22":4,1u:R,16:R,"3V-17":R,2l:11,"41-40":R,2k:11,"1z-1k":11},13:{1W:"&2s;",2M:R,46:11,44:11,34:"4n",1x:{21:"4o 1m",2P:"?",1X:"1v\\n\\n",3E:"4r\'t 4t 1D O: ",4g:"4m 4B\'t 51 O 1z-1k 4F: ",37:\'<!4T 1z 4S "-//4V//3H 4W 1.0 4Z//4Y" "1Z://2y.3L.3K/4X/3I/3H/3I-4P.4J"><1z 4I="1Z://2y.3L.3K/4L/5L"><3J><4N 1Z-4M="5G-5M" 6K="2O/1z; 6J=6I-8" /><1t>6L 1v</1t></3J><3B 1L="25-6M:6Q,6P,6O,6N-6F;6y-2f:#6x;2f:#6w;25-22:6v;2O-3D:3C;"><T 1L="2O-3D:3C;3w-32:1.6z;"><T 1L="25-22:6A-6E;">1v</T><T 1L="25-22:.6C;3w-6B:6R;"><T>3v 3.0.76 (72 73 3x)</T><T><a 2h="1Z://3u.2w/1v" 1F="38" 1L="2f:#3y">1Z://3u.2w/1v</a></T><T>70 17 6U 71.</T><T>6T 6X-3x 6Y 6D.</T></T><T>6t 61 60 J 1k, 5Z <a 2h="6u://2y.62.2w/63-66/65?64=5X-5W&5P=5O" 1L="2f:#3y">5R</a> 5V <2R/>5U 5T 5S!</T></T></3B></1z>\'}},1Y:{2j:N,2A:{}},1U:{},3A:{6n:/\\/\\*[\\s\\S]*?\\*\\//2c,6m:/\\/\\/.*$/2c,6l:/#.*$/2c,6k:/"([^\\\\"\\n]|\\\\.)*"/g,6o:/\'([^\\\\\'\\n]|\\\\.)*\'/g,6p:1f M(\'"([^\\\\\\\\"]|\\\\\\\\.)*"\',"3z"),6s:1f M("\'([^\\\\\\\\\']|\\\\\\\\.)*\'","3z"),6q:/(&1y;|<)!--[\\s\\S]*?--(&1G;|>)/2c,3M:/\\w+:\\/\\/[\\w-.\\/?%&=:@;]SYS_API_TMP2g,6a:{18:/(&1y;|<)\\?=?/g,1b:/\\?(&1G;|>)/g},69:{18:/(&1y;|<)%=?/g,1b:/%(&1G;|>)/g},6d:{18:/(&1y;|<)\\s*1k.*?(&1G;|>)/2T,1b:/(&1y;|<)\\/\\s*1k\\s*(&1G;|>)/2T}},16:{1H:6(a){6 b(i,k){H e.16.2o(i,k,e.13.1x[k])}O(K c=\'<T 1g="16">\',d=e.16.2x,h=d.2X,g=0;g<h.L;g++)c+=(d[h[g]].1H||b)(a,h[g]);c+="</T>";H c},2o:6(a,b,c){H\'<2W><a 2h="#" 1g="6e 6h\'+b+" "+b+\'">\'+c+"</a></2W>"},2b:6(a){K b=a.1F,c=b.1l||"";b=B(p(b,".20",R).1c);K d=6(h){H(h=15(h+"6f(\\\\w+)").X(c))?h[1]:N}("6g");b&&d&&e.16.2x[d].2B(b);a.3N()},2x:{2X:["21","2P"],21:{1H:6(a){I(a.V("2l")!=R)H"";K b=a.V("1t");H e.16.2o(a,"21",b?b:e.13.1x.21)},2B:6(a){a=1E.6j(t(a.1c));a.1l=a.1l.Q("47","")}},2P:{2B:6(){K a="68=0";a+=", 18="+(31.30-33)/2+", 32="+(31.2Z-2Y)/2+", 30=33, 2Z=2Y";a=a.Q(/^,/,"");a=1P.6Z("","38",a);a.2C();K b=a.1E;b.6W(e.13.1x.37);b.6V();a.2C()}}}},35:6(a,b){K c;I(b)c=[b];Y{c=1E.36(e.13.34);O(K d=[],h=0;h<c.L;h++)d.U(c[h]);c=d}c=c;d=[];I(e.13.2M)c=c.1O(z());I(c.L===0)H d;O(h=0;h<c.L;h++){O(K g=c[h],i=a,k=c[h].1l,j=3W 0,l={},m=1f M("^\\\\[(?<2V>(.*?))\\\\]$"),s=1f M("(?<27>[\\\\w-]+)\\\\s*:\\\\s*(?<1T>[\\\\w-SYS_API_TMP3]+|\\\\[.*?\\\\]|\\".*?\\"|\'.*?\')\\\\s*;?","g");(j=s.X(k))!=N;){K o=j.1T.Q(/^[\'"]|[\'"]$/g,"");I(o!=N&&m.1A(o)){o=m.X(o);o=o.2V.L>0?o.2V.1e(/\\s*,\\sSYS_API_TMP2):[]}l[j.27]=o}g={1F:g,1n:C(i,l)};g.1n.1D!=N&&d.U(g)}H d},1M:6(a,b){K c=J.35(a,b),d=N,h=e.13;I(c.L!==0)O(K g=0;g<c.L;g++){b=c[g];K i=b.1F,k=b.1n,j=k.1D,l;I(j!=N){I(k["1z-1k"]=="R"||e.2v["1z-1k"]==R){d=1f e.4l(j);j="4O"}Y I(d=A(j))d=1f d;Y 6H;l=i.3X;I(h.2M){l=l;K m=x(l),s=11;I(m.1i("<![6G[")==0){m=m.4h(9);s=R}K o=m.L;I(m.1i("]]\\>")==o-3){m=m.4h(0,o-3);s=R}l=s?m:l}I((i.1t||"")!="")k.1t=i.1t;k.1D=j;d.2Q(k);b=d.2F(l);I((i.1c||"")!="")b.1c=i.1c;i.2G.74(b,i)}}},2E:6(a){w(1P,"4k",6(){e.1M(a)})}};e.2E=e.2E;e.1M=e.1M;e.2L=6(a,b,c){J.1T=a;J.P=b;J.L=a.L;J.23=c;J.1V=N};e.2L.Z.1q=6(){H J.1T};e.4l=6(a){6 b(j,l){O(K m=0;m<j.L;m++)j[m].P+=l}K c=A(a),d,h=1f e.1U.5Y,g=J,i="2F 1H 2Q".1e(" ");I(c!=N){d=1f c;O(K k=0;k<i.L;k++)(6(){K j=i[k];g[j]=6(){H h[j].1p(h,14)}})();d.28==N?1P.1X(e.13.1x.1X+(e.13.1x.4g+a)):h.2J.U({1I:d.28.17,2D:6(j){O(K l=j.17,m=[],s=d.2J,o=j.P+j.18.L,F=d.28,q,G=0;G<s.L;G++){q=y(l,s[G]);b(q,o);m=m.1O(q)}I(F.18!=N&&j.18!=N){q=y(j.18,F.18);b(q,j.P);m=m.1O(q)}I(F.1b!=N&&j.1b!=N){q=y(j.1b,F.1b);b(q,j.P+j[0].5Q(j.1b));m=m.1O(q)}O(j=0;j<m.L;j++)m[j].1V=c.1V;H m}})}};e.4j=6(){};e.4j.Z={V:6(a,b){K c=J.1n[a];c=c==N?b:c;K d={"R":R,"11":11}[c];H d==N?c:d},3Y:6(a){H 1E.4i(a)},4c:6(a,b){K c=[];I(a!=N)O(K d=0;d<a.L;d++)I(1j a[d]=="2m")c=c.1O(y(b,a[d]));H J.4e(c.6b(D))},4e:6(a){O(K b=0;b<a.L;b++)I(a[b]!==N)O(K c=a[b],d=c.P+c.L,h=b+1;h<a.L&&a[b]!==N;h++){K g=a[h];I(g!==N)I(g.P>d)1N;Y I(g.P==c.P&&g.L>c.L)a[b]=N;Y I(g.P>=c.P&&g.P<d)a[h]=N}H a},4d:6(a){K b=[],c=2u(J.V("2i-1s"));v(a,6(d,h){b.U(h+c)});H b},3U:6(a){K b=J.V("1M",[]);I(1j b!="2m"&&b.U==N)b=[b];a:{a=a.1q();K c=3W 0;O(c=c=1Q.6c(c||0,0);c<b.L;c++)I(b[c]==a){b=c;1N a}b=-1}H b!=-1},2r:6(a,b,c){a=["1s","6i"+b,"P"+a,"6r"+(b%2==0?1:2).1q()];J.3U(b)&&a.U("67");b==0&&a.U("1N");H\'<T 1g="\'+a.1K(" ")+\'">\'+c+"</T>"},3Q:6(a,b){K c="",d=a.1e("\\n").L,h=2u(J.V("2i-1s")),g=J.V("2z-1s-2t");I(g==R)g=(h+d-1).1q().L;Y I(3R(g)==R)g=0;O(K i=0;i<d;i++){K k=b?b[i]:h+i,j;I(k==0)j=e.13.1W;Y{j=g;O(K l=k.1q();l.L<j;)l="0"+l;j=l}a=j;c+=J.2r(i,k,a)}H c},49:6(a,b){a=x(a);K c=a.1e("\\n");J.V("2z-1s-2t");K d=2u(J.V("2i-1s"));a="";O(K h=J.V("1D"),g=0;g<c.L;g++){K i=c[g],k=/^(&2s;|\\s)+/.X(i),j=N,l=b?b[g]:d+g;I(k!=N){j=k[0].1q();i=i.1o(j.L);j=j.Q(" ",e.13.1W)}i=x(i);I(i.L==0)i=e.13.1W;a+=J.2r(g,l,(j!=N?\'<17 1g="\'+h+\' 5N">\'+j+"</17>":"")+i)}H a},4f:6(a){H a?"<4a>"+a+"</4a>":""},4b:6(a,b){6 c(l){H(l=l?l.1V||g:g)?l+" ":""}O(K d=0,h="",g=J.V("1D",""),i=0;i<b.L;i++){K k=b[i],j;I(!(k===N||k.L===0)){j=c(k);h+=u(a.1o(d,k.P-d),j+"48")+u(k.1T,j+k.23);d=k.P+k.L+(k.75||0)}}h+=u(a.1o(d),c()+"48");H h},1H:6(a){K b="",c=["20"],d;I(J.V("2k")==R)J.1n.16=J.1n.1u=11;1l="20";J.V("2l")==R&&c.U("47");I((1u=J.V("1u"))==11)c.U("6S");c.U(J.V("1g-27"));c.U(J.V("1D"));a=a.Q(/^[ ]*[\\n]+|[\\n]*[ ]*$/g,"").Q(/\\r/g," ");b=J.V("43-22");I(J.V("42-45")==R)a=n(a,b);Y{O(K h="",g=0;g<b;g++)h+=" ";a=a.Q(/\\t/g,h)}a=a;a:{b=a=a;h=/<2R\\s*\\/?>|&1y;2R\\s*\\/?&1G;/2T;I(e.13.46==R)b=b.Q(h,"\\n");I(e.13.44==R)b=b.Q(h,"");b=b.1e("\\n");h=/^\\sSYS_API_TMP2;g=4Q;O(K i=0;i<b.L&&g>0;i++){K k=b[i];I(x(k).L!=0){k=h.X(k);I(k==N){a=a;1N a}g=1Q.4q(k[0].L,g)}}I(g>0)O(i=0;i<b.L;i++)b[i]=b[i].1o(g);a=b.1K("\\n")}I(1u)d=J.4d(a);b=J.4c(J.2J,a);b=J.4b(a,b);b=J.49(b,d);I(J.V("41-40"))b=E(b);1j 2H!="1d"&&2H.3S&&2H.3S.1C(/5s/)&&c.U("5t");H b=\'<T 1c="\'+t(J.1c)+\'" 1g="\'+c.1K(" ")+\'">\'+(J.V("16")?e.16.1H(J):"")+\'<3Z 5z="0" 5H="0" 5J="0">\'+J.4f(J.V("1t"))+"<3T><3P>"+(1u?\'<2d 1g="1u">\'+J.3Q(a)+"</2d>":"")+\'<2d 1g="17"><T 1g="3O">\'+b+"</T></2d></3P></3T></3Z></T>"},2F:6(a){I(a===N)a="";J.17=a;K b=J.3Y("T");b.3X=J.1H(a);J.V("16")&&w(p(b,".16"),"5c",e.16.2b);J.V("3V-17")&&w(p(b,".17"),"56",f);H b},2Q:6(a){J.1c=""+1Q.5d(1Q.5n()*5k).1q();e.1Y.2A[t(J.1c)]=J;J.1n=C(e.2v,a||{});I(J.V("2k")==R)J.1n.16=J.1n.1u=11},5j:6(a){a=a.Q(/^\\s+|\\s+$/g,"").Q(/\\s+/g,"|");H"\\\\b(?:"+a+")\\\\b"},5f:6(a){J.28={18:{1I:a.18,23:"1k"},1b:{1I:a.1b,23:"1k"},17:1f M("(?<18>"+a.18.1m+")(?<17>.*?)(?<1b>"+a.1b.1m+")","5o")}}};H e}();1j 2e!="1d"&&(2e.1v=1v);',62,441,'||||||function|||||||||||||||||||||||||||||||||||||return|if|this|var|length|XRegExp|null|for|index|replace|true||div|push|getParam|call|exec|else|prototype||false|lastIndex|config|arguments|RegExp|toolbar|code|left|captureNames|slice|right|id|undefined|split|new|class|addToken|indexOf|typeof|script|className|source|params|substr|apply|toString|String|line|title|gutter|SyntaxHighlighter|_xregexp|strings|lt|html|test|OUTSIDE_CLASS|match|brush|document|target|gt|getHtml|regex|global|join|style|highlight|break|concat|window|Math|isRegExp|throw|value|brushes|brushName|space|alert|vars|http|syntaxhighlighter|expandSource|size|css|case|font|Fa|name|htmlScript|dA|can|handler|gm|td|exports|color|in|href|first|discoveredBrushes|light|collapse|object|cache|getButtonHtml|trigger|pattern|getLineHtml|nbsp|numbers|parseInt|defaults|com|items|www|pad|highlighters|execute|focus|func|all|getDiv|parentNode|navigator|INSIDE_CLASS|regexList|hasFlag|Match|useScriptTags|hasNamedCapture|text|help|init|br|input|gi|Error|values|span|list|250|height|width|screen|top|500|tagName|findElements|getElementsByTagName|aboutDialog|_blank|appendChild|charAt|Array|copyAsGlobal|setFlag|highlighter_|string|attachEvent|nodeName|floor|backref|output|the|TypeError|sticky|Za|iterate|freezeTokens|scope|type|textarea|alexgorbatchev|version|margin|2010|005896|gs|regexLib|body|center|align|noBrush|require|childNodes|DTD|xhtml1|head|org|w3|url|preventDefault|container|tr|getLineNumbersHtml|isNaN|userAgent|tbody|isLineHighlighted|quick|void|innerHTML|create|table|links|auto|smart|tab|stripBrs|tabs|bloggerMode|collapsed|plain|getCodeLinesHtml|caption|getMatchesHtml|findMatches|figureOutLineNumbers|removeNestedMatches|getTitleHtml|brushNotHtmlScript|substring|createElement|Highlighter|load|HtmlScript|Brush|pre|expand|multiline|min|Can|ignoreCase|find|blur|extended|toLowerCase|aliases|addEventListener|innerText|textContent|wasn|select|createTextNode|removeChild|option|same|frame|xmlns|dtd|twice|1999|equiv|meta|htmlscript|transitional|1E3|expected|PUBLIC|DOCTYPE|on|W3C|XHTML|TR|EN|Transitional||configured|srcElement|Object|after|run|dblclick|matchChain|valueOf|constructor|default|switch|click|round|execAt|forHtmlScript|token|gimy|functions|getKeywords|1E6|escape|within|random|sgi|another|finally|supply|MSIE|ie|toUpperCase|catch|returnValue|definition|event|border|imsx|constructing|one|Infinity|from|when|Content|cellpadding|flags|cellspacing|try|xhtml|Type|spaces|2930402|hosted_button_id|lastIndexOf|donate|active|development|keep|to|xclick|_s|Xml|please|like|you|paypal|cgi|cmd|webscr|bin|highlighted|scrollbars|aspScriptTags|phpScriptTags|sort|max|scriptScriptTags|toolbar_item|_|command|command_|number|getElementById|doubleQuotedString|singleLinePerlComments|singleLineCComments|multiLineCComments|singleQuotedString|multiLineDoubleQuotedString|xmlComments|alt|multiLineSingleQuotedString|If|https|1em|000|fff|background|5em|xx|bottom|75em|Gorbatchev|large|serif|CDATA|continue|utf|charset|content|About|family|sans|Helvetica|Arial|Geneva|3em|nogutter|Copyright|syntax|close|write|2004|Alex|open|JavaScript|highlighter|July|02|replaceChild|offset|83'.split('|'),0,{}))

;(function()
{
	// CommonJS
	typeof(require) != 'undefined' ? SyntaxHighlighter = require('shCore').SyntaxHighlighter : null;

	function Brush()
	{
		var keywords =	'break case catch continue ' +
						'default delete do else false  ' +
						'for function if in instanceof ' +
						'new null return super switch ' +
						'this throw true try typeof var while with'
						;

		var r = SyntaxHighlighter.regexLib;
		
		this.regexList = [
			{ regex: r.multiLineDoubleQuotedString,					css: 'string' },			// double quoted strings
			{ regex: r.multiLineSingleQuotedString,					css: 'string' },			// single quoted strings
			{ regex: r.singleLineCComments,							css: 'comments' },			// one line comments
			{ regex: r.multiLineCComments,							css: 'comments' },			// multiline comments
			{ regex: /\s*#.SYS_API_TMP2gm,									css: 'preprocessor' },		// preprocessor tags like #region and #endregion
			{ regex: new RegExp(this.getKeywords(keywords), 'gm'),	css: 'keyword' }			// keywords
			];
	
		this.forHtmlScript(r.scriptScriptTags);
	};

	Brush.prototype	= new SyntaxHighlighter.Highlighter();
	Brush.aliases	= ['js', 'jscript', 'javascript'];

	SyntaxHighlighter.brushes.JScript = Brush;

	// CommonJS
	typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
		*/
	});
	
	var opt=SYSLIB_base64.mutilstring(function(){
		/*
		<!doctype html>
		<html>
		<head>
		  <meta charset="utf-8" />
		  <!-- disable zooming -->
		  <meta name="viewport" content="width=device-width,initial-scale=1.0, user-scalable=0" />
		  <title>%$1% - SYSAPI</title>
		  <style>
		.syntaxhighlighter {
		  background-color: white !important;
		}
		.syntaxhighlighter .line.alt1 {
		  background-color: white !important;
		}
		.syntaxhighlighter .line.alt2 {
		  background-color: white !important;
		}
		.syntaxhighlighter .line.highlighted.alt1, .syntaxhighlighter .line.highlighted.alt2 {
		  background-color: #e0e0e0 !important;
		}
		.syntaxhighlighter .line.highlighted.number {
		  color: black !important;
		}
		.syntaxhighlighter table caption {
		  color: black !important;
		}
		.syntaxhighlighter .gutter {
		  color: #afafaf !important;
		}
		.syntaxhighlighter .gutter .line {
		  border-right: 3px solid #6ce26c !important;
		}
		.syntaxhighlighter .gutter .line.highlighted {
		  background-color: #6ce26c !important;
		  color: white !important;
		}
		.syntaxhighlighter.printing .line .content {
		  border: none !important;
		}
		.syntaxhighlighter.collapsed {
		  overflow: visible !important;
		}
		.syntaxhighlighter.collapsed .toolbar {
		  color: blue !important;
		  background: white !important;
		  border: 1px solid #6ce26c !important;
		}
		.syntaxhighlighter.collapsed .toolbar a {
		  color: blue !important;
		}
		.syntaxhighlighter.collapsed .toolbar a:hover {
		  color: red !important;
		}
		.syntaxhighlighter .toolbar {
		  color: white !important;
		  background: #6ce26c !important;
		  border: none !important;
		}
		.syntaxhighlighter .toolbar a {
		  color: white !important;
		}
		.syntaxhighlighter .toolbar a:hover {
		  color: black !important;
		}
		.syntaxhighlighter .plain, .syntaxhighlighter .plain a {
		  color: black !important;
		}
		.syntaxhighlighter .comments, .syntaxhighlighter .comments a {
		  color: #008200 !important;
		}
		.syntaxhighlighter .string, .syntaxhighlighter .string a {
		  color: blue !important;
		}
		.syntaxhighlighter .keyword {
		  color: #006699 !important;
		}
		.syntaxhighlighter .preprocessor {
		  color: gray !important;
		}
		.syntaxhighlighter .variable {
		  color: #aa7700 !important;
		}
		.syntaxhighlighter .value {
		  color: #009900 !important;
		}
		.syntaxhighlighter .functions {
		  color: #ff1493 !important;
		}
		.syntaxhighlighter .constants {
		  color: #0066cc !important;
		}
		.syntaxhighlighter .script {
		  font-weight: bold !important;
		  color: #006699 !important;
		  background-color: none !important;
		}
		.syntaxhighlighter .color1, .syntaxhighlighter .color1 a {
		  color: gray !important;
		}
		.syntaxhighlighter .color2, .syntaxhighlighter .color2 a {
		  color: #ff1493 !important;
		}
		.syntaxhighlighter .color3, .syntaxhighlighter .color3 a {
		  color: red !important;
		}
		
		.syntaxhighlighter .keyword {
		  font-weight: bold !important;
		}
			.no_border_table ,.no_border_table td{
				border:none;	
			}
			#sysapi_print_infobox{
				margin:10px 30px 10px 30px;
				border:3px solid #A8A9B3;
				border-radius:3px;
			}
			html,body,input,textarea{
				font-family:"文泉驿微米黑","微软雅黑";
				color:#444;
			}
			.sysapi_print_infobox_table td{
				width:300px;
				text-align:center;
				height:30px;
			}
			.bgb{
				background-color:#D2D2D2;
			}
			.sysapi_print_api {
		margin: 20px;
		}
		.sysapi_print_api_title {
		font-size: 36px;
		margin-bottom: 20px;
		border-bottom:solid 1px #444;
		}
		.sysapi_print_api_des {
		text-align: center;
		margin-bottom: 40px;
		}
		.sysapi_print_api_smtitle {
		font-size: 18px;
		font-weight: bold;
		border-bottom: 1px solid #444;
		margin-bottom:20px;
		}
		.sysapi_print_api_sm {
		margin: 0 40px 20px 40px;
		}
		.sysapi_print_api_title span,.sysapi_print_api_sm span{
			float:right;
			color:#888;
			font-size:12px;
		}
		  </style>
		</head>
		<body>
		<center><h1>%$1%</h1></center>
		<div id="sysapi_print_infobox">
			<center>
			<table class="sysapi_print_infobox_table no_border_table" width="600px" border="1">
			  <tr>
				<td>API版本</td>
				<td>%$2%</td>
			  </tr>
			  <tr>
				<td>修订版本</td>
				<td>%$3%</td>
			  </tr>
			  <tr>
				<td>修订时间</td>
				<td>%$4%</td>
			  </tr>
			</table>
			</center>
		</div>%$5%</body>
		<script type="text/javascript">
		%$8%
		SyntaxHighlighter.highlight();
		%$6%%$7%
		</html>
		*/
	},[APIDOC.project.name,APIDOC.project.apiver,APIDOC.project.rev,(new Date(APIDOC.project.mtime)).toLocaleString(),apidatas,"</","script>",syntaxcode]);
	opt=opt.replace(/SYS_API_TMP2/g,"*/");
	opt=opt.replace(/SYS_API_TMP3/g,"%#");
	return opt;
}
SYS_API_TMP_EXPORT=0;
_f("#syslab_api_toolbox_to_export").addEventListener("click",function(){
	sys_api_msgbox([{
		t:"导出为SYSAPI",
		des:"[未来]便于导入其他账户"
	},{
		t:"导出为JSON",
		des:"便于二次开发"
	},{
		t:"导出为HTML",
		des:"便于打印"
	},{
		t:"导出为PDF",
		des:"便于打印阅读"
	},{
		t:"导出为DOC[开发中]",
		des:"便于文档存档神马的"
	}],"导出文档",2,[
		function(){
			var savenotice=sys_api_notice("正在导出",3,0,1);
			save(APIDOC.project.id+".sysapi.bin",1);
			savenotice.removethis();
		},function(){
			var savenotice=sys_api_notice("正在导出",3,0,1);
			var savedoc=APIDOC;
			for(var i=0;i<savedoc.data.length;i++){
				remove_parent(savedoc.data[i]);
			}
			var savedata=JSON.stringify(savedoc);
			INIT_MAIN(APIDOC);
			savedata=(savedata);
			SYSLIB_utils.file.init({persistent: true, size: 200*1024 * 1024}, function(fs) {
				var eee=function(){
					SYSLIB_utils.file.write('SYSAPI.json', {data: savedata, type: 'application/octet-stream'},function(fileEntry) {
							window.open(fileEntry.toURL());
							savenotice.removethis();
					},
						function(){
							sys_api_notice("导出失败",2,5000);
							savenotice.removethis();
						}
					);
				}
				eee();
			}, function(){
				sys_api_notice("导出失败",2,5000);
				savenotice.removethis();
			});
		},function(){
			var savenotice=sys_api_notice("正在导出",3,0,1);
			var document=genprintpage();
			SYSLIB_utils.file.init({persistent: true, size: 200*1024 * 1024}, function(fs) {
				var eee=function(){
					SYSLIB_utils.file.write('SYSAPI.html', {data: document, type: 'text/html'},function(fileEntry) {
							window.open(fileEntry.toURL());
							savenotice.removethis();
					},
						function(){
							sys_api_notice("导出失败",2,5000);
							savenotice.removethis();
						}
					);
				}
				eee();
			}, function(){
				sys_api_notice("导出失败",2,5000);
				savenotice.removethis();
			});
		},function(){
			SYS_API_TMP_EXPORT=sys_api_notice("正在导出",3,0,1);
			NOW_SYNC_PNODE=_f("#notice_pbar");
			NOW_SYNC_PTYPE=1;
			var document=genprintpage();
			start_uploadlist(document,"SYSAPI.html",function(){
				start_downloadlist("SYSAPI.html.pdf",function(datas2){
						//var datas=SYSLIB_base64.decode(datas2);
						SYSLIB_utils.file.init({persistent: true, size: 200*1024 * 1024}, function(fs) {
							var eee=function(){
								SYSLIB_utils.file.write('SYSAPI.pdf', {data: dataURItoBlob(datas2,'application/octet-stream'), type: 'application/octet-stream'},function(fileEntry) {
										window.open(fileEntry.toURL());
										SYS_API_TMP_EXPORT.removethis();
								},
									function(){
										sys_api_notice("导出失败",2,5000);
										SYS_API_TMP_EXPORT.removethis();
									}
								);
							}
							eee();
						}, function(){
							sys_api_notice("导出失败",2,5000);
							SYS_API_TMP_EXPORT.removethis();
						});
				},1)
			},1)
		},function(){
			return;
			SYS_API_TMP_EXPORT=sys_api_notice("正在导出",3,0,1);
			var document=genprintpage();
			start_uploadlist(document,"SYSAPI.html",function(){
				start_downloadlist("SYSAPI.html.docx",function(datas2){
						//var datas=SYSLIB_base64.decode(datas2);
						SYSLIB_utils.file.init({persistent: true, size: 200*1024 * 1024}, function(fs) {
							var eee=function(){
								SYSLIB_utils.file.write('SYSAPI.docx', {data: dataURItoBlob(datas2,'application/octet-stream'), type: 'application/octet-stream'},function(fileEntry) {
										window.open(fileEntry.toURL());
										SYS_API_TMP_EXPORT.removethis();
								},
									function(){
										sys_api_notice("导出失败",2,5000);
										SYS_API_TMP_EXPORT.removethis();
									}
								);
							}
							eee();
						}, function(){
							sys_api_notice("导出失败",2,5000);
							SYS_API_TMP_EXPORT.removethis();
						});
				},1)
			},2)
		}
	])
},false);
function dataURItoBlob(dataURI, mimeString,callback) {
    // convert base64 to raw binary data held in a string
    // doesn't handle URLEncoded DataURIs
    var byteString = atob(dataURI);

    // separate out the mime component
  
    // write the bytes of the string to an ArrayBuffer
    var ab = new ArrayBuffer(byteString.length);
    var ia = new Uint8Array(ab);
    for (var i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
    }

    // write the ArrayBuffer to a blob, and you're done
	var dataView = new DataView(ab); 
    return new Blob([dataView], {type:mimeString});
}
_f("#syslab_api_plbg_des_del").addEventListener("click",function(){
	/*if(confirm("确定删除这个api?")){
		_f("#syslab_api_plbg_des_des").className="syslab_api_plbg_des_show";
		_f("#syslab_api_plbg_des_datas").className="syslab_api_plbg_des_hide";
		_f("#syslab_api_plbg_des_apivar").className="syslab_api_plbg_des_hide";
		_f("#syslab_api_plbg_des_toolbox").className="syslab_api_plbg_des_hide";
		delete LAST_CLICKED_API.apidata.parent.child[LAST_CLICKED_API.apidata.parent.child.indexOf(LAST_CLICKED_API.apidata)];
		LAST_CLICKED_API=0;
		parse_APIDOC(APIDOC);
		needsave();
	}*/
	sys_api_msgbox("确定删除这个api?","提示",0,{
		ok:function(){
			_f("#syslab_api_plbg_des_des").className="syslab_api_plbg_des_show";
			_f("#syslab_api_plbg_des_datas").className="syslab_api_plbg_des_hide";
			_f("#syslab_api_plbg_des_apivar").className="syslab_api_plbg_des_hide";
			_f("#syslab_api_plbg_des_toolbox").className="syslab_api_plbg_des_hide";
			if(LAST_CLICKED_API.apidata.parent){
				LAST_CLICKED_API.apidata.parent.child.splice(LAST_CLICKED_API.apidata.parent.child.indexOf(LAST_CLICKED_API.apidata),1);
			}else{
				APIDOC.data.splice(APIDOC.data.indexOf(LAST_CLICKED_API.apidata),1);
			}
			LAST_ADDED_API=0;
			LAST_CLICKED_API=0;
			parse_APIDOC(APIDOC);
			needsave();
		},
		cancle:function(){
			
		},
	})
},false);
LAST_ADDED_API=0;
_f("#syslab_api_toolbox_to_add").addEventListener("click",function(){
	sys_api_msgbox([{
		t:"创建API",
		des:"可被调用,拥有请求和返回设置"
	},{
		t:"创建类",
		des:"类不可以被调用，作为API的类"
	}],"选择创建类型",2,[
		function(){
			var cdata={
				name:"APIname",
				des:"API的说明",
				isapi:1,
				login:0,
				admin:0,
				post:0,
				get:0,
				jsonp:0,
				request:"JSON",
				req:[],
				code:'//add demo return value here',
				codedes:[],
				addnew:1,
				note:"额外的说明",
				child:[]
			}
			if(LAST_CLICKED_API){
				cdata.parent=LAST_CLICKED_API.apidata;
				LAST_CLICKED_API.apidata.child.push(cdata);
			}else{
				APIDOC.data.push(cdata);
			}
			LAST_CLICKED_API=0;
			LAST_ADDED_API=cdata;
			parse_APIDOC(APIDOC);
			
			needsave()
		},function(){
			var cdata={
				name:"APIname",
				des:"API的说明",
				isapi:0,
				addnew:1,
				child:[]
			}
			if(LAST_CLICKED_API){
				cdata.parent=LAST_CLICKED_API.apidata;
				LAST_CLICKED_API.apidata.child.push(cdata);
			}else{
				APIDOC.data.push(cdata);
			}
			LAST_CLICKED_API=0;
			LAST_ADDED_API=cdata;
			parse_APIDOC(APIDOC);
			
			needsave()
		}
	])
	/*if(confirm("确定创建一个 API/类 ?")){
		
		  if(LAST_CLICKED_API){
			  LAST_CLICKED_API.apidata.child.push(cdata);
			  cdata.parent=LAST_CLICKED_API.apidata;
		  }else{
			  APIDOC.data.push(cdata);
			  cdata.parent=APIDOC.data;
		  }
		  LAST_CLICKED_API=0;
		  parse_APIDOC(APIDOC);
		  LAST_ADDED_API=cdata;
		  needsave()
	}*/
},false);


function check_apipanel_width(){
	_f("#syslab_api_plbg_apis").style.overflowX="scroll";
	if(_f("#syslab_api_plbg_apis").scrollWidth>300){
		LAST_API_P_WIDTH=_f("#syslab_api_plbg_apis").scrollWidth;
	}else{
		LAST_API_P_WIDTH=260;
	}
	_f("#syslab_api_plbg").style.width=LAST_API_P_WIDTH+"px";
	_f("#syslab_api_plbg_apis").style.width=LAST_API_P_WIDTH+"px";
	if(API_P_FOLD){
		_f("#syslab_api_plbg").style.marginLeft=(-1)*(LAST_API_P_WIDTH-20)+"px";
	}
	_f("#syslab_api_plbg_apis").style.overflowX="hidden";
}


function fix_all_cnodes_height(child){
	if(!child.parentNode){
		return;
	}
	var cnodes=child.parentNode.childNodes;
	for(var j=0;j<cnodes.length;j++){
		if(cnodes[j]&&cnodes[j].className&&cnodes[j].className=="syslab_api_apinode_childs"){
			cnodes[j].style.height=(cnodes[j].scrollHeight)+"px";
		}
	}
	setTimeout(function(){
		fix_all_cnodes_height(child.parentNode);
	},10)
}
LAST_CLICKED_API=0;
function init_all_APIDOCs(){
	LAST_CLICKED_API=0;
	var apinodes=_f(".syslab_api_apinode_fold");
for(var i=0;i<apinodes.length;i++){
	apinodes[i].addEventListener("click",function(e){
		if(SYSLIB_dom.checkFather(this,e)){
			if(!this.unfolded){
				this.unfolded=1;
				var cnodes=this.parentNode.parentNode.childNodes;
				for(var j=0;j<cnodes.length;j++){
					if(cnodes[j]&&cnodes[j].className&&cnodes[j].className=="syslab_api_apinode_childs"){
						cnodes[j].style.height="0px";
					}
				}
				this.innerHTML="&#xe076;";
			}else{
				this.unfolded=0;
				var cnodes=this.parentNode.parentNode.childNodes;
				for(var j=0;j<cnodes.length;j++){
					if(cnodes[j]&&cnodes[j].className&&cnodes[j].className=="syslab_api_apinode_childs"){
						cnodes[j].style.height=(cnodes[j].scrollHeight)+"px";
					}
				}
				this.innerHTML="&#xe077;";
				var yyu=this.parentNode.parentNode;
				setTimeout(function(){
					fix_all_cnodes_height(yyu);
				},10)
			}
		}
		check_apipanel_width();
		SYSLIB_utils.preventDefault(e);
	})
	apinodes[i].click();
}
}
_f("#syslab_api_toolbox_to_fold").addEventListener("click",function(){
	var apinodes=_f(".syslab_api_apinode_fold");
	for(var i=0;i<apinodes.length;i++){
		if(!apinodes[i].unfolded){
			apinodes[i].click();
		}
	}
},false);
_f("#syslab_api_toolbox_to_unfold").addEventListener("click",function(){
	var apinodes=_f(".syslab_api_apinode_fold");
	for(var i=0;i<apinodes.length;i++){
		if(apinodes[i].unfolded){
			apinodes[i].click();
		}
	}
},false);

var readeddatas={
	project:{
		name:"test project",
		apiver:1,
		rev:1,
		mtime:(new Date()).getTime(),
		ctime:(new Date()).getTime()
	},
	data:[
		{
			name:"user",
			des:"这是用户的主对象,这是用户的主对象,这是用户的主对象,这是用户的主对象,这是用户的主对象,这是用户的主对象,这是用户的主对象",
			isapi:1,
			login:0,
			admin:0,
			post:1,
			get:0,
			jsonp:0,
			request:"JSON",
			req:[
				{
					n:"uname",
					m:1,
					t:"string",
					des:"用户名"
				},{
					n:"upass",
					m:1,
					t:"string",
					des:"密码"
				},{
					n:"auth",
					m:0,
					t:"string",
					des:"验证码"
				}
			],
			code:'"data": {\n    "user": {\n      "address": "",\n      "u_name": "hello",\n      "gender": "",\n      "t_coin": 0,\n      "mobile": "",\n}',
			codedes:[
				{
					n:"uname",
					t:"string",
					des:"用户名"
				},{
					n:"upass",
					t:"string",
					des:"密码"
				},{
					n:"auth",
					t:"string",
					des:"验证码"
				}
			],
			note:"test only",
			child:[{
				name:"get",
				des:"获取用户信息",
				isapi:0,
				child:[{
					  name:"uname",
					  des:"获取用户的用户名",
					  isapi:1,
					  login:1,
					  admin:0,
					  post:1,
					  get:0,
					  jsonp:0,
					  request:"JSON",
					  req:[
						  {
							  n:"uid",
							  m:1,
							  t:"int",
							  des:"用户id"
						  },{
							  n:"utoken",
							  m:1,
							  t:"string",
							  des:"认证字符串"
						  }
					  ],
					  code:'"data": {\n    "user": {\n   "uname": "hello"\n}',
					  codedes:[
						  {
							  n:"uname",
							  t:"string",
							  des:"用户名"
						  }
					  ],
					  note:"test only",
					  child:[]
				  }]
			}]
		}
	]
}

var INIT_ALL=function(node){
	if(node.child){
		for(var i=0;i<node.child.length;i++){
			node.child[i].parent = node;
			INIT_ALL(node.child[i]);
		}
	}
	if(node.req){
		for(var i=0;i<node.req.length;i++){
			node.req[i].parent = node;
			INIT_ALL(node.req[i]);
		}
	}
	if(node.codedes){
		for(var i=0;i<node.codedes.length;i++){
			node.codedes[i].parent = node;
			INIT_ALL(node.codedes[i]);
		}
	}
	return;
}

var INIT_MAIN=function(node) {
	for(var i=0;i<node.data.length;i++){
		if(node.data[i]){
			INIT_ALL(node.data[i]);
		}
	}
	return;
}
APIDOC={
	project:{
		name:"test project",
		apiver:1,
		rev:1,
		mtime:(new Date()).getTime(),
		ctime:(new Date()).getTime()
	},
	data:[]
}


LAST_ADDED_API=0;

function freash_api_names(){
	var freash_api_names_do=function(node,lastw){
		node.childNodes[0].childNodes[1].lastw=lastw;
		var name=(lastw=="")?lastw:(lastw+".");
		name=name+node.childNodes[0].childNodes[1].apidata.name;
		node.childNodes[0].childNodes[1].innerHTML=node.childNodes[0].childNodes[1].apidata.name;
		var nodes=node.childNodes[1].childNodes;
		for(var i=0;i<nodes.length;i++){
			freash_api_names_do(nodes[i],name);
		}
	}
	
	var nodes=_f("#syslab_api_plbg_apis").childNodes;
	for(var i=0;i<nodes.length;i++){
		freash_api_names_do(nodes[i],'');
	}
}
function parse_APIDOC_do(data,node,lastw){
	if(!data){
		return;
	}
	var apinode=document.createElement('div');
	apinode.className="syslab_api_apinode";
	var apinode_name=document.createElement('div');
	apinode_name.className="syslab_api_apinode_name";
	var fold=document.createElement('span');
	fold.className="syslab_api_apinode_fold";
	fold.innerHTML="&#xe076;";
	var name=document.createElement('span');
	name.className="syslab_api_apinode_name_name";
	name.innerHTML=data.name;
	name.apidata=data;
	name.apidata.ref=data;
	name.lastw=lastw;
	if(data['addnew']){
		LAST_ADDED_API=name;
		delete data.addnew;
	}
	lastw=(lastw=='')?lastw:(lastw+".")
	name.fullw=lastw+data.name;
	var cnode=document.createElement('div');
	cnode.className="syslab_api_apinode_childs";
	node.appendChild(apinode);
	apinode.appendChild(apinode_name);
	apinode_name.appendChild(fold);
	apinode_name.appendChild(name);
	apinode.appendChild(cnode);
	fold.addEventListener("click",function(e){
		if(SYSLIB_dom.checkFather(this,e)){
			if(!this.unfolded){
				this.unfolded=1;
				var cnodes=this.parentNode.parentNode.childNodes;
				for(var j=0;j<cnodes.length;j++){
					if(cnodes[j]&&cnodes[j].className&&cnodes[j].className=="syslab_api_apinode_childs"){
						cnodes[j].style.height="0px";
					}
				}
				this.innerHTML="&#xe076;";
			}else{
				this.unfolded=0;
				var cnodes=this.parentNode.parentNode.childNodes;
				for(var j=0;j<cnodes.length;j++){
					if(cnodes[j]&&cnodes[j].className&&cnodes[j].className=="syslab_api_apinode_childs"){
						cnodes[j].style.height=(cnodes[j].scrollHeight)+"px";
					}
				}
				this.innerHTML="&#xe077;";
				var yyu=this.parentNode.parentNode;
				setTimeout(function(){
					fix_all_cnodes_height(yyu);
				},10)
			}
		}
		check_apipanel_width();
		SYSLIB_utils.preventDefault(e);
	},false)
	fold.click();
	name.addEventListener("click",function(){
		SYSLIB_dom.freshdomcache();
		if(LAST_CLICKED_API){
			_c(LAST_CLICKED_API).remove("LAST_CLICKED_API");
		}
		if(LAST_CLICKED_API==this){
			LAST_CLICKED_API=0;
			_f("#syslab_api_plbg_des_des").className="syslab_api_plbg_des_show";
			_f("#syslab_api_plbg_des_datas").className="syslab_api_plbg_des_hide";
			_f("#syslab_api_plbg_des_apivar").className="syslab_api_plbg_des_hide";
			_f("#syslab_api_plbg_des_toolbox").className="syslab_api_plbg_des_hide";
			return;
		}
		
		
		LAST_CLICKED_API=this;
		_c(LAST_CLICKED_API).add("LAST_CLICKED_API");
		
		_f("#syslab_api_plbg_des_des").className="syslab_api_plbg_des_hide";
		_f("#syslab_api_plbg_des_datas").className="syslab_api_plbg_des_show";
		_f("#syslab_api_plbg_des_apivar").className="syslab_api_plbg_des_hide";
		_f("#syslab_api_plbg_des_toolbox").className="syslab_api_plbg_des_show";
		_f("#syslab_api_plbg_des_name").innerHTML="";
		_f("#syslab_api_plbg_des_detialdes").innerHTML="";
		_f("#syslab_api_plbg_des_inputvar").innerHTML="";
		_f("#syslab_api_plbg_codedes").innerHTML="";
		var $this=this;
		
		var tmpa=document.createElement('span');
		var lastw=$this.lastw;
		lastw=(lastw=="")?lastw:(lastw+".");
		tmpa.innerHTML=lastw+$this.apidata.name;
		$this.fullw=lastw+$this.apidata.name;
		_f("#syslab_api_plbg_des_name").appendChild(tmpa);
		tmpa=document.createElement('span');
		tmpa.innerHTML="&#xe078;";
		tmpa.className="syslab_api_plbg_des_edit_btn";
		_f("#syslab_api_plbg_des_name").appendChild(tmpa);
		tmpa.addEventListener("click",function(){
			if(this.savedata){
				$this.apidata.name=this.savedata.value;
				
				if($this.lastw&&$this.lastw!=""){
					this.previousSibling.innerHTML=$this.lastw+"."+$this.apidata.name;
				}else{
					this.previousSibling.innerHTML=$this.apidata.name;
				}
				freash_api_names();
				this.savedata=0;
				needsave()
			}else{
				this.previousSibling.innerHTML="<span>"+$this.lastw+"</span> . ";
				var tmpipt=document.createElement('input');
				tmpipt.value=$this.apidata.name;
				this.previousSibling.appendChild(tmpipt);
				this.savedata=tmpipt;
			}
		},false);
		
		tmpa=document.createElement('span');
		tmpa.innerHTML=$this.apidata.des;
		_f("#syslab_api_plbg_des_detialdes").appendChild(tmpa);
		tmpa=document.createElement('span');
		tmpa.innerHTML="&#xe078;";
		tmpa.className="syslab_api_plbg_des_edit_btn";
		_f("#syslab_api_plbg_des_detialdes").appendChild(tmpa);
		tmpa.addEventListener("click",function(){
			if(this.savedata){
				$this.apidata.des=this.savedata.value;
				this.previousSibling.innerHTML=$this.apidata.des;
				this.savedata=0;
				needsave();
			}else{
				this.previousSibling.innerHTML="";
				var tmpipt=document.createElement('input');
				tmpipt.value=$this.apidata.des;
				this.previousSibling.appendChild(tmpipt);
				this.savedata=tmpipt;
			}
		},false);
		if(!data.isapi){
			return;
		}
		SYSLIB_dom.freshdomcache();
		_f("#syslab_api_plbg_des_apivar").className="syslab_api_plbg_des_show";
		if($this.apidata.login){
			_f("#syslab_api_plbg_des_statue_login").previousSibling.innerHTML="&#x56;";
		}else{
			_f("#syslab_api_plbg_des_statue_login").previousSibling.innerHTML="&#x55;";
		}
		_f("#syslab_api_plbg_des_statue_login").addEventListener("click",function(){
			if($this.apidata.login){
				$this.apidata.login=0;
				_f("#syslab_api_plbg_des_statue_login").previousSibling.innerHTML="&#x55;";
			}else{
				$this.apidata.login=1;
				_f("#syslab_api_plbg_des_statue_login").previousSibling.innerHTML="&#x56;";
			}
			needsave();
		},false);
		
		if($this.apidata.admin){
			_f("#syslab_api_plbg_des_statue_admin").previousSibling.innerHTML="&#x56;";
		}else{
			_f("#syslab_api_plbg_des_statue_admin").previousSibling.innerHTML="&#x55;";
		}
		_f("#syslab_api_plbg_des_statue_admin").addEventListener("click",function(){
			if($this.apidata.admin){
				$this.apidata.admin=0;
				_f("#syslab_api_plbg_des_statue_admin").previousSibling.innerHTML="&#x55;";
			}else{
				$this.apidata.admin=1;
				_f("#syslab_api_plbg_des_statue_admin").previousSibling.innerHTML="&#x56;";
			}
			needsave();
		},false);
		
		if($this.apidata.post){
			_f("#syslab_api_plbg_des_statue_post").previousSibling.innerHTML="&#x56;";
		}else{
			_f("#syslab_api_plbg_des_statue_post").previousSibling.innerHTML="&#x55;";
		}
		_f("#syslab_api_plbg_des_statue_post").addEventListener("click",function(){
			if($this.apidata.admin){
				$this.apidata.admin=0;
				_f("#syslab_api_plbg_des_statue_post").previousSibling.innerHTML="&#x55;";
			}else{
				$this.apidata.admin=1;
				_f("#syslab_api_plbg_des_statue_post").previousSibling.innerHTML="&#x56;";
			}
			needsave();
		},false);
		
		if($this.apidata.get){
			_f("#syslab_api_plbg_des_statue_get").previousSibling.innerHTML="&#x56;";
		}else{
			_f("#syslab_api_plbg_des_statue_get").previousSibling.innerHTML="&#x55;";
		}
		_f("#syslab_api_plbg_des_statue_get").addEventListener("click",function(){
			if($this.apidata.admin){
				$this.apidata.admin=0;
				_f("#syslab_api_plbg_des_statue_get").previousSibling.innerHTML="&#x55;";
			}else{
				$this.apidata.admin=1;
				_f("#syslab_api_plbg_des_statue_get").previousSibling.innerHTML="&#x56;";
			}
			needsave();
		},false);
		
		if($this.apidata.jsonp){
			_f("#syslab_api_plbg_des_statue_jsonp").previousSibling.innerHTML="&#x56;";
		}else{
			_f("#syslab_api_plbg_des_statue_jsonp").previousSibling.innerHTML="&#x55;";
		}
		_f("#syslab_api_plbg_des_statue_jsonp").addEventListener("click",function(){
			if($this.apidata.jsonp){
				$this.apidata.jsonp=0;
				_f("#syslab_api_plbg_des_statue_jsonp").previousSibling.innerHTML="&#x55;";
			}else{
				$this.apidata.jsonp=1;
				_f("#syslab_api_plbg_des_statue_jsonp").previousSibling.innerHTML="&#x56;";
			}
			needsave();
		},false);
		
		
		
		
		_f("#syslab_api_plbg_des_statue_req").previousSibling.innerHTML=$this.apidata.request;
		_f("#syslab_api_plbg_des_statue_req").addEventListener("click",function(){
			if(this.savedata){
				$this.apidata.request=this.savedata.value;
				this.previousSibling.innerHTML=$this.apidata.request;
				this.savedata=0;
				needsave();
			}else{
				this.previousSibling.innerHTML="";
				var tmpipt=document.createElement('input');
				tmpipt.value=$this.apidata.request;
				this.previousSibling.appendChild(tmpipt);
				this.savedata=tmpipt;
			}
		},false);
		
		
		
		_f("#syslab_api_plbg_des_inputvar").innerHTML='<li class="bgBlack"><span class="syslab_api_plbg_des_inputvar">字段</span><span class="syslab_api_plbg_des_inputvar">必选</span><span class="syslab_api_plbg_des_inputvar">类型</span><span class="syslab_api_plbg_des_inputvar">说明</span></li>';
		var j=-1;
		for(var i=0;i<$this.apidata.req.length;i++){
			
			var tdata=$this.apidata.req[i];
			if(!tdata){
				continue;
			}
			j++;
			var tmpb=document.createElement('li');
			tmpb.className=(j%2==0)?"bgWhite":"bgBlack";
			tmpb.apidata=tdata;
			_f("#syslab_api_plbg_des_inputvar").appendChild(tmpb);
			var tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.n;
			tmpb.appendChild(tmpc);
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_edit_btn2";
			tmpc.innerHTML="&#xe078;";
			tmpb.appendChild(tmpc);
			tmpc.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.n=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.n;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.n;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar syslab_api_plbg_des_statue_ico";
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			if(tdata.m){
				tmpc.innerHTML="&#x56;";
			}else{
				tmpc.innerHTML="&#x55;";
			}
			tmpd.addEventListener("click",function(){
				if(this.parentNode.apidata.m){
					this.parentNode.apidata.m=0;
					this.previousSibling.innerHTML="&#x55;";
				}else{
					this.parentNode.apidata.m=1;
					this.previousSibling.innerHTML="&#x56;";
				}
				needsave();
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.t;
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			tmpd.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.t=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.t;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.t;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.des;
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			tmpd.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.des=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.des;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.des;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			var tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_edit_btn2 syslab_api_plbg_des_edit_btn3";
			tmpc.innerHTML="&#x4b;";
			tmpb.appendChild(tmpc);
			tmpc.addEventListener("click",function(){
				/*if(confirm("确定删除这行?")){
					
					delete this.parentNode.apidata.parent.req[this.parentNode.apidata.parent.req.indexOf(this.parentNode.apidata)];
					_f("#syslab_api_plbg_des_inputvar").removeChild(this.parentNode);
					var nodes=_f("#syslab_api_plbg_des_inputvar").childNodes;
					for(var i=1;i<nodes.length;i++){
						nodes[i].className=(i%2==0)?"bgWhite":"bgBlack";
					}
					needsave();
				}*/
				SYS_API_MSGBOX_TMP=this;
				
				sys_api_msgbox("确定删除这行?","提示",0,{
					ok:function(){
						//delete SYS_API_MSGBOX_TMP.parentNode.apidata.parent.req[SYS_API_MSGBOX_TMP.parentNode.apidata.parent.req.indexOf(SYS_API_MSGBOX_TMP.parentNode.apidata)];
						SYS_API_MSGBOX_TMP.parentNode.apidata.parent.req.splice(SYS_API_MSGBOX_TMP.parentNode.apidata.parent.req.indexOf(SYS_API_MSGBOX_TMP.parentNode.apidata),1)
						_f("#syslab_api_plbg_des_inputvar").removeChild(SYS_API_MSGBOX_TMP.parentNode);
						var nodes=_f("#syslab_api_plbg_des_inputvar").childNodes;
						for(var i=1;i<nodes.length;i++){
							nodes[i].className=(i%2==0)?"bgWhite":"bgBlack";
						}
						needsave();
					},
					cancle:function(){
						
					},
				})
			},false);
		}
		
		
		_f("#syslab_api_plbg_des_inputvar_add").addEventListener("click",function(){
			if(!SYSLAB_GS_LOCK_INPUTVAR_add){
				return;
			}
			needsave();
			SYSLAB_GS_LOCK_INPUTVAR_add=0;
			
			var tdata={
				n:"输入字段",
				m:0,
				t:"string",
				des:"描述",
				parent:$this.apidata
			}
			$this.apidata.req.push(tdata);
			var tmpb=document.createElement('li');
			tmpb.className=(($this.apidata.req.length-1)%2==0)?"bgWhite":"bgBlack";
			tmpb.apidata=tdata;
			_f("#syslab_api_plbg_des_inputvar").appendChild(tmpb);
			var tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.n;
			tmpb.appendChild(tmpc);
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_edit_btn2";
			tmpc.innerHTML="&#xe078;";
			tmpb.appendChild(tmpc);
			tmpc.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.n=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.n;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.n;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar syslab_api_plbg_des_statue_ico";
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			if(tdata.m){
				tmpc.innerHTML="&#x56;";
			}else{
				tmpc.innerHTML="&#x55;";
			}
			tmpd.addEventListener("click",function(){
				if(this.parentNode.apidata.m){
					this.parentNode.apidata.m=0;
					this.previousSibling.innerHTML="&#x55;";
				}else{
					this.parentNode.apidata.m=1;
					this.previousSibling.innerHTML="&#x56;";
				}
				needsave();
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.t;
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			tmpd.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.t=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.t;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.t;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.des;
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			tmpd.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.des=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.des;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.des;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			var tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_edit_btn2 syslab_api_plbg_des_edit_btn3";
			tmpc.innerHTML="&#x4b;";
			tmpb.appendChild(tmpc);
			tmpc.addEventListener("click",function(){
				SYS_API_MSGBOX_TMP=this;
				/*if(confirm("确定删除这行?")){
					delete this.parentNode.apidata.parent.req[this.parentNode.apidata.parent.req.indexOf(this.parentNode.apidata)];
					_f("#syslab_api_plbg_des_inputvar").removeChild(this.parentNode);
					var nodes=_f("#syslab_api_plbg_des_inputvar").childNodes;
					for(var i=1;i<nodes.length;i++){
						nodes[i].className=(i%2==0)?"bgWhite":"bgBlack";
					}
					needsave();
				}*/
				sys_api_msgbox("确定删除这行?","提示",0,{
					ok:function(){
						//delete SYS_API_MSGBOX_TMP.parentNode.apidata.parent.req[SYS_API_MSGBOX_TMP.parentNode.apidata.parent.req.indexOf(SYS_API_MSGBOX_TMP.parentNode.apidata)];
						SYS_API_MSGBOX_TMP.parentNode.apidata.parent.req.splice(SYS_API_MSGBOX_TMP.parentNode.apidata.parent.req.indexOf(SYS_API_MSGBOX_TMP.parentNode.apidata),1);
						_f("#syslab_api_plbg_des_inputvar").removeChild(SYS_API_MSGBOX_TMP.parentNode);
						var nodes=_f("#syslab_api_plbg_des_inputvar").childNodes;
						for(var i=1;i<nodes.length;i++){
							nodes[i].className=(i%2==0)?"bgWhite":"bgBlack";
						}
						needsave();
					},
					cancle:function(){
						
					},
				})
			},false);
			
		},false);
		
		_f("#syslab_api_plbg_des_code").innerHTML='<pre class="brush: js">'+$this.apidata.code+'</pre>';
		SyntaxHighlighter.highlight();
		_f("#syslab_api_plbg_des_code_title_btn").apidata=$this.apidata;
		_f("#syslab_api_plbg_des_code_title_btn").addEventListener("click",function(){
			
			if(this.savedata2){
				this.apidata.code=this.savedata2.value;
				_f("#syslab_api_plbg_des_code").innerHTML='<pre class="brush: js">'+this.apidata.code+'</pre>';
				SyntaxHighlighter.highlight();
				this.savedata2=0;
				needsave();
			}else{
				_f("#syslab_api_plbg_des_code").innerHTML="";
				var tmpipt=document.createElement('textarea');
				tmpipt.value=this.apidata.code;
				_f("#syslab_api_plbg_des_code").appendChild(tmpipt);
				this.savedata2=tmpipt;
			}
		},false);
		

       			
		_f("#syslab_api_plbg_codedes").innerHTML='<li class="bgBlack"><span class="syslab_api_plbg_des_inputvar">字段</span><span class="syslab_api_plbg_des_inputvar">类型</span><span class="syslab_api_plbg_des_inputvar">说明</span></li>';
		var j=-1;
		for(var i=0;i<$this.apidata.codedes.length;i++){
			var tdata=$this.apidata.codedes[i];
			if(!tdata){
				continue;
			}
			j++;
			var tmpb=document.createElement('li');
			tmpb.className=(j%2==0)?"bgWhite":"bgBlack";
			tmpb.apidata=tdata;
			_f("#syslab_api_plbg_codedes").appendChild(tmpb);
			var tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.n;
			tmpb.appendChild(tmpc);
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_edit_btn2";
			tmpc.innerHTML="&#xe078;";
			tmpb.appendChild(tmpc);
			tmpc.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.n=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.n;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.n;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.t;
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			tmpd.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.t=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.t;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.t;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.des;
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			tmpd.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.des=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.des;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.des;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			var tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_edit_btn2 syslab_api_plbg_des_edit_btn3";
			tmpc.innerHTML="&#x4b;";
			tmpb.appendChild(tmpc);
			tmpc.addEventListener("click",function(){
				SYS_API_MSGBOX_TMP=this;
				/*if(confirm("确定删除这行?")){
					delete this.parentNode.apidata.parent.codedes[this.parentNode.apidata.parent.codedes.indexOf(this.parentNode.apidata)];
					_f("#syslab_api_plbg_codedes").removeChild(this.parentNode);
					var nodes=_f("#syslab_api_plbg_codedes").childNodes;
					for(var i=1;i<nodes.length;i++){
						nodes[i].className=(i%2==0)?"bgWhite":"bgBlack";
					}
					needsave();
				}*/
				sys_api_msgbox("确定删除这行?","提示",0,{
					ok:function(){
						//delete SYS_API_MSGBOX_TMP.parentNode.apidata.parent.codedes[SYS_API_MSGBOX_TMP.parentNode.apidata.parent.codedes.indexOf(SYS_API_MSGBOX_TMP.parentNode.apidata)];
						SYS_API_MSGBOX_TMP.parentNode.apidata.parent.codedes.splice(SYS_API_MSGBOX_TMP.parentNode.apidata.parent.codedes.indexOf(SYS_API_MSGBOX_TMP.parentNode.apidata),1)
						_f("#syslab_api_plbg_codedes").removeChild(SYS_API_MSGBOX_TMP.parentNode);
						var nodes=_f("#syslab_api_plbg_codedes").childNodes;
						for(var i=1;i<nodes.length;i++){
							nodes[i].className=(i%2==0)?"bgWhite":"bgBlack";
						}
						needsave();
					},
					cancle:function(){
						
					},
				})
			},false);
		}
		
		
		_f("#syslab_api_plbg_codedes_add").addEventListener("click",function(){
			if(!SYSLAB_GS_LOCK_CODEDES_add){
				return;
			}
			SYSLAB_GS_LOCK_CODEDES_add=0;
			
			var tdata={
				n:"输入字段",
				m:0,
				t:"string",
				des:"描述",
				parent:$this.apidata
			}
			$this.apidata.codedes.push(tdata);
			var tmpb=document.createElement('li');
			tmpb.className=(($this.apidata.codedes.length-1)%2==0)?"bgWhite":"bgBlack";
			tmpb.apidata=tdata;
			_f("#syslab_api_plbg_codedes").appendChild(tmpb);
			var tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.n;
			tmpb.appendChild(tmpc);
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_edit_btn2";
			tmpc.innerHTML="&#xe078;";
			tmpb.appendChild(tmpc);
			tmpc.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.n=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.n;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.n;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.t;
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			tmpd.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.t=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.t;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.t;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_inputvar";
			tmpc.innerHTML=tdata.des;
			tmpb.appendChild(tmpc);
			var tmpd=document.createElement('span');
			tmpd.className="syslab_api_plbg_des_edit_btn2";
			tmpd.innerHTML="&#xe078;";
			tmpb.appendChild(tmpd);
			tmpd.addEventListener("click",function(){
				if(this.savedata){
					this.parentNode.apidata.des=this.savedata.value;
					this.previousSibling.innerHTML=this.parentNode.apidata.des;
					this.savedata=0;
					needsave();
				}else{
					this.previousSibling.innerHTML="";
					var tmpipt=document.createElement('input');
					tmpipt.value=this.parentNode.apidata.des;
					this.previousSibling.appendChild(tmpipt);
					this.savedata=tmpipt;
				}
			},false);
			
			var tmpc=document.createElement('span');
			tmpc.className="syslab_api_plbg_des_edit_btn2 syslab_api_plbg_des_edit_btn3";
			tmpc.innerHTML="&#x4b;";
			tmpb.appendChild(tmpc);
			tmpc.addEventListener("click",function(){
				SYS_API_MSGBOX_TMP=this;
				/*if(confirm("确定删除这行?")){
					delete this.parentNode.apidata.parent.codedes[this.parentNode.apidata.parent.codedes.indexOf(this.parentNode.apidata)];
					_f("#syslab_api_plbg_codedes").removeChild(this.parentNode);
					var nodes=_f("#syslab_api_plbg_codedes").childNodes;
					for(var i=1;i<nodes.length;i++){
						nodes[i].className=(i%2==0)?"bgWhite":"bgBlack";
					}
					needsave();
				}*/
				sys_api_msgbox("确定删除这行?","提示",0,{
					ok:function(){
						//delete SYS_API_MSGBOX_TMP.parentNode.apidata.parent.codedes[SYS_API_MSGBOX_TMP.parentNode.apidata.parent.codedes.indexOf(SYS_API_MSGBOX_TMP.parentNode.apidata)];
						SYS_API_MSGBOX_TMP.parentNode.apidata.parent.codedes.splice(SYS_API_MSGBOX_TMP.parentNode.apidata.parent.codedes.indexOf(SYS_API_MSGBOX_TMP.parentNode.apidata),1)
						_f("#syslab_api_plbg_codedes").removeChild(SYS_API_MSGBOX_TMP.parentNode);
						var nodes=_f("#syslab_api_plbg_codedes").childNodes;
						for(var i=1;i<nodes.length;i++){
							nodes[i].className=(i%2==0)?"bgWhite":"bgBlack";
						}
						needsave();
					},
					cancle:function(){
						
					},
				})
			},false);
			
		},false);
		
		_f("#syslab_api_plbg_des_des_var").innerHTML=$this.apidata.note;
		_f("#syslab_api_plbg_des_des_var_btn").apidata=$this.apidata;
		_f("#syslab_api_plbg_des_des_var_btn").addEventListener("click",function(){
			if(this.savedata1){
				this.apidata.note=this.savedata1.value;
				_f("#syslab_api_plbg_des_des_var").innerHTML=this.apidata.note;
				
				this.savedata1=0;
				needsave();
			}else{
				_f("#syslab_api_plbg_des_des_var").innerHTML="";
				var tmpipt=document.createElement('textarea');
				tmpipt.value=this.apidata.note;
				_f("#syslab_api_plbg_des_des_var").appendChild(tmpipt);
				this.savedata1=tmpipt;
			}
		},false);
		
		
	},false)
	if(data.child){
		for(var i=0;i<data.child.length;i++){
			parse_APIDOC_do(data.child[i],cnode,name.fullw)
		}
	}
}

             

function parse_APIDOC(data){
	_f("#syslab_api_plbg_apis").innerHTML="";
	SYSLIB_dom.freshdomcache();
	if(data){
		
		INIT_MAIN(data);
		for(var i=0;i<data.data.length;i++){
			parse_APIDOC_do(data.data[i],_f("#syslab_api_plbg_apis"),'')
		}
		
		if(LAST_ADDED_API){
			var tmpstack=[];
			var tmpnode=LAST_ADDED_API.parentNode;
			while(tmpnode&&tmpnode.parentNode&&tmpnode.parentNode.parentNode&&tmpnode.parentNode.parentNode.previousSibling){
					tmpstack.push(tmpnode.parentNode.parentNode.previousSibling);
					tmpnode=tmpnode.parentNode.parentNode.previousSibling;			
			}
			
			for(var i=tmpstack.length-1;i>=0;i--){
				if(tmpstack[i].childNodes[0]&&tmpstack[i].childNodes[0].tagName){
					tmpstack[i].childNodes[0].click();
				}
			}
			
				LAST_ADDED_API.click();
			LAST_ADDED_API=0;
			
		}
		_f("#syslab_api_landing").style.opacity=0;
		setTimeout(function(){
			_f("#syslab_api_landing").style.display="none";
		},600);
	}
	
}
ALLLIST=0;
function dynsearch(){
	var words=_f("#syslab_api_plbg_search").value;
	_f("#syslab_api_plbg_apis_search").innerHTML="";
	SYSLIB_dom.freshdomcache();
	if(!words){
		_f("#syslab_api_plbg_apis_search").style.display="none";
		ALLLIST=0;
		return;
	}
	
	_f("#syslab_api_plbg_apis_search").style.display="block";
	var getalllist=function(data,wname){
		if(!data||!data.length){
			return;
		}
		for(var i=0;i<data.length;i++){
			var oname=(wname)?(wname+"."+data[i].name):data[i].name;
			ALLLIST.push({
				name:oname,
				refer:data[i]
			});
			getalllist(data[i].child,oname)
		}
	}
	if(!ALLLIST){
		ALLLIST=[];
		getalllist(APIDOC.data,'');
	}
	var choosethis=function(){
		LAST_ADDED_API=this.referdata.refer;
		LAST_ADDED_API['addnew']=1;
		parse_APIDOC(APIDOC);
		_f("#syslab_api_plbg_apis_search").style.display="none";
		_f("#syslab_api_plbg_search").value="";
		ALLLIST=0;
	}
	var key=0;
	for(var i=0;i<ALLLIST.length;i++){
		if((ALLLIST[i].name).indexOf(words)!=-1){
			key=1;
			var newnode=document.createElement('div');
			newnode.referdata=ALLLIST[i];
			newnode.innerHTML=ALLLIST[i].name;
			_f("#syslab_api_plbg_apis_search").appendChild(newnode);
			newnode.addEventListener("click",choosethis,false);
		}
	}
	if(!key){
		_f("#syslab_api_plbg_apis_search").innerHTML="<center><span>&#xe010;</span><div>Ops~没有找到结果哦!</div></center>"
	}
}
_f("#syslab_api_plbg_search").addEventListener("keyup",dynsearch,false);
NEED_SAVE=0;
var remove_parent=function(node){
		try{
			delete node.parent;
			delete node.ref;
		}catch(e){
			console.log(e);
		}
			if(node.child){
				for(var i=0;i<node.child.length;i++){
					remove_parent(node.child[i]);
				}
			}
			if(node.req){
				for(var i=0;i<node.req.length;i++){
					remove_parent(node.req[i]);
				}
			}
			if(node.codedes){
				for(var i=0;i<node.codedes.length;i++){
					remove_parent(node.codedes[i]);
				}
			}
	}
function save(fname,outfile,datatosave,nonotice){
	if(datatosave){
		var savedata=JSON.stringify(datatosave);
	}else{
		var savedoc=APIDOC;
		APIDOC.project.rev++;
		for(var i=0;i<savedoc.data.length;i++){
			remove_parent(savedoc.data[i]);
		}
		var savedata=JSON.stringify(savedoc);
		INIT_MAIN(APIDOC);
		
	}
	
	savedata=SYSLIB_base64.encode(SYSLIB_base64.utf8to16(escape(savedata)));
	SYSLIB_utils.file.init({persistent: true, size: 200*1024 * 1024}, function(fs) {
		var eee=function(){
			SYSLIB_utils.file.write(fname, {data: savedata, type: 'application/octet-stream'},function(fileEntry) {
				if(!nonotice){
					sys_api_notice("保存完成",1,3000);
				}
				if(outfile){
					window.open(fileEntry.toURL());
				}
				
				console.log("Saved ")
				_f('#syslab_api_toolbox_to_save').className="";
				
			},
				function(){
					sys_api_notice("保存失败",2,5000);
				}
			);
		}
		eee();
	}, function(){
		sys_api_notice("保存失败",2,5000);
	});
}
_f("#syslab_api_toolbox_to_save").addEventListener("click",save_manual,false);
function prepare_data(data){
	APIDOC=unescape(SYSLIB_base64.decode(data));
	APIDOC=JSON.parse(APIDOC);
	parse_APIDOC(APIDOC);
}
function loadfromfile(evt){
	var files = evt.target.files;
	var reader = new FileReader();
	reader.onload = (function (theFile) {
		return function (e) {
			prepare_data(e.target.result);
			_f('#syslab_api_load_file').value="";
		};
	})(files[0]);
	reader.readAsText(files[0]);
}
_f('#syslab_api_toolbox_to_load').addEventListener('click', function(){
	//_f('#syslab_api_load_file').click();
	sys_api_notice("功能暂未开放",2,5000);
}, false);
//_f('#syslab_api_load_file').addEventListener('change', loadfromfile, false);

function autoload(file,cb){
	FILER_ERROR=function(e){
		console.log(e)
		cb(0);
	};
	console.log("Load "+file);
	SYSLIB_utils.file.init({persistent: true, size: 200*1024 * 1024}, function(fs) {
	 SYSLIB_utils.file.open(file,function(file2) {
		 console.log("Load ok "+file);
		 	var reader = new FileReader();
			reader.onload = (function (theFile) {
				return function (e) {
					cb(e.target.result);
				};
			})(file);
			reader.readAsText(file2);
	 },
  			function(err){
				if(err.name){
					console.log(err.name)
				}else{
					console.log(err)
				}
				
				cb(0)
			}
	 );
	}, function(){
		cb(0)
	});
}
function needsave(){
		_f('#syslab_api_toolbox_to_save').className="NEED_SAVE";
		NEED_SAVE=1;
		var automtime=(new Date()).getTime();
		APIDOC.project.automtime=automtime;
		SYSAPI_MYPJ.data[APIDOC.project.id].automtime=automtime;
		SYSAPI_MYPJ.time=(new Date()).getTime();
		save(APIDOC.project.id+".tmp.sysapi.bin",0,0,1);
		save("list.sysapi.bin",0,SYSAPI_MYPJ,1);
}
function save_manual(){
	NEED_SAVE=0;
	var mtime=(new Date()).getTime();
	APIDOC.project.mtime=mtime;
	SYSAPI_MYPJ.data[APIDOC.project.id].mtime=mtime;
	var savenotice=sys_api_notice("正在保存",3,0,1);
	save("list.sysapi.bin",0,{data:SYSAPI_MYPJ.data,time:mtime},1);
	setTimeout(function(){
		savenotice.removethis();
	},3000)
	save(APIDOC.project.id+".sysapi.bin");
	if(NOW_USER_SIGNED&&NOW_USER_CLOUD){
		setTimeout(function(){
		var syncnotice=sys_api_notice("正在同步",3,0,1);
		NOW_SYNC_PNODE=_f("#notice_pbar");
		NOW_SYNC_PTYPE=1;
		sync_datas(function(){
			sys_api_notice("同步完成",1,0,1);
			setTimeout(function(){
				syncnotice.removethis();
			},3000)
		});
		},1000)
	}
}
function removefile(file){
	SYSLIB_utils.file.rm(file,function(){
			console.log("delete "+file)	
	},function(){
			console.log('Faild To del files')
	})
}
window.onbeforeunload=function(){
	if(NEED_SAVE){
		return "文档尚未保存，确定不保存直接退出？";
	}
}
NO_HTML5_SLICE=0;
now_upload={
		chunk:0,
		totalcunk:0,
		percent:0,
		datas:"",
		token:0,
		name:0,
		cb:0
}
now_download={
		chunk:0,
		totalcunk:0,
		percent:0,
		datas:"",
		token:0,
		name:0,
		cb:0
}
var chunksize=4096;
var next_uploadok=0;
function start_uploadlist(data,name,cb,convert){
	now_upload.chunk=0;
	now_upload.totalcunk=0;
	now_upload.percent=0;
	next_uploadok=0;
	now_upload.token=SYSLIB_token.get();
	now_upload.datas=data;
	now_upload.name=name;
	now_upload.cb=cb;
	now_upload.convert=convert;
	if(!data||data==""){
		return cb()
	}
	now_upload.totalcunk=(now_upload.datas).length/chunksize;
	
	now_upload.totalcunk=(parseInt(now_upload.totalcunk)==now_upload.totalcunk)?now_upload.totalcunk:(parseInt(now_upload.totalcunk)+1);
	socket.emit('startupload', { utoken:NOW_USER.utoken,stoken:NOW_USER.stoken,uid:NOW_USER.uid,token:now_upload.token,filename:now_upload.name});
}
function start_downloadlist(name,cb){
	now_download.chunk=0;
	now_download.percent=0;
	now_download.totalcunk=0;
	now_download.token=SYSLIB_token.get();
	now_download.datas="";
	now_download.cb=cb;
	now_download.name=name;
	socket.emit('getfile', { utoken:NOW_USER.utoken,stoken:NOW_USER.stoken,uid:NOW_USER.uid,token:now_download.token,file:now_download.name});
}
socket.on('getfile', function (data) {
	if(data.statue=="empty"){
		now_download.cb(0);
		return;
	}
	now_download.totalcunk=data.num;
	now_download.chunk++;
	ppercent(parseInt((now_download.chunk/now_download.totalcunk)*10000)/100,NOW_SYNC_PNODE,1)
	socket.emit('getdata', { utoken:NOW_USER.utoken,stoken:NOW_USER.stoken,uid:NOW_USER.uid,token:now_download.token,num:now_download.chunk});
});
socket.on('getdata', function (data) {
	now_download.datas+=data.data;
	now_download.chunk++;
	now_download.percent=(now_download.chunk/now_download.totalcunk);
	ppercent(parseInt((now_download.chunk/now_download.totalcunk)*10000)/100,NOW_SYNC_PNODE,1)
	if(now_download.chunk>now_download.totalcunk){
		socket.emit('getok', { utoken:NOW_USER.utoken,stoken:NOW_USER.stoken,uid:NOW_USER.uid,token:now_download.token});
		now_download.cb(now_download.datas);
		now_download.datas="";
		return;
	}
	socket.emit('getdata', { utoken:NOW_USER.utoken,stoken:NOW_USER.stoken,uid:NOW_USER.uid,token:now_download.token,num:now_download.chunk});
});
function senddata(data){
	now_upload.chunk++;
	now_upload.percent=(now_upload.chunk/now_upload.totalcunk);
	ppercent(parseInt((now_upload.chunk/now_upload.totalcunk)*10000)/100,NOW_SYNC_PNODE,1)
	if(now_upload.chunk==now_upload.totalcunk){
		next_uploadok=1;
	}
	if(now_upload.chunk>now_upload.totalcunk){
		now_upload.cb();
		return;
	}
	
	socket.emit('recivedata', { utoken:NOW_USER.utoken,stoken:NOW_USER.stoken,uid:NOW_USER.uid,token:now_upload.token,data:data,check:str_md5(data),fallback:'noslice'});
}
socket.on('senddata', function (data) {
	if(data.statue=="err"){
		now_upload.chunk--;
		ppercent(parseInt((now_upload.chunk/now_upload.totalcunk)*10000)/100,NOW_SYNC_PNODE,1)
	}
	if(next_uploadok){
		socket.emit('sendover', { utoken:NOW_USER.utoken,stoken:NOW_USER.stoken,uid:NOW_USER.uid,token:now_upload.token,fallback:'noslice',convert:now_upload.convert});
	}else{
		var start=now_upload.chunk*chunksize;
		var stop = parseInt(start+chunksize-1);
		senddata(now_upload.datas.slice(start,stop+1));
	}
	
});
socket.on('saved', function (data) {
	now_upload.cb();
});
socket.on('startsenddata', function (data) {
	next_uploadok=0;
	var start=0*chunksize;
	var stop = parseInt(start+chunksize-1);
	senddata(now_upload.datas.slice(start,stop+1));
});
function sync_datas(cb){
	var touploadlist=[];
	var todownloadlist=[];
	start_downloadlist("list.sysapi.bin",function(data){
		if(data){
			try{
				var tmpdata=unescape(SYSLIB_base64.decode(data));
				tmpdata=JSON.parse(tmpdata);
				var server_data={data:data,ver:tmpdata.time,pdata:tmpdata.data};
			}catch(e){
				console.log(e);
				var server_data={data:0,ver:0,pdata:[]};
			}
		}else{
			console.log("server dose not have file")
			var server_data={data:0,ver:0,pdata:[]};
			
		}
		var client_data=0;
		var list_choosed=0;
		var sync_from_server=function(){
			var tmp=0;
			for(tmp in server_data.pdata){
				var cver=client_data.pdata[tmp];
				var sver=server_data.pdata[tmp];
				if(list_choosed==0){
					if(cver){
						if(cver.mtime>sver.mtime){
							touploadlist.push({name:tmp+".sysapi.bin",data:0});
						}else if(cver.mtime<sver.mtime){
							todownloadlist.push({name:tmp+".sysapi.bin",data:0});
						}
					}
				}else{
					if(cver){
						if(cver.mtime>sver.mtime){
							touploadlist.push({name:tmp+".sysapi.bin",data:0});
						}else if(cver.mtime<sver.mtime){
							todownloadlist.push({name:tmp+".sysapi.bin",data:0});
						}
					}else{
						todownloadlist.push({name:tmp+".sysapi.bin",data:0});
					}
				}
				client_data.pdata[tmp]=0;
				server_data.pdata[tmp]=0;
			}
			for(tmp in client_data.pdata){
				var cver=client_data.pdata[tmp];
				if(cver){
					if(list_choosed==0){
						touploadlist.push({name:tmp+".sysapi.bin",data:0});
					}
				}
			}
		}
		
		function sync_now_download(){
			if(todownloadlist.length<=0){
				sync_now_upload();
				return;
			}
			var nowlist=todownloadlist.shift();
			var dlcb=function(data){
				var tmpdata=unescape(SYSLIB_base64.decode(data));
				tmpdata=JSON.parse(tmpdata);
				save(nowlist.name,0,tmpdata,1);
				sync_now_download();
			}
			if(!nowlist.data){
				start_downloadlist(nowlist.name,dlcb)
			}else{
				dlcb(nowlist.data);
			}
		}
		function sync_now_upload(){
			if(touploadlist.length<=0){
				
			cb();
				return;
			}
			var nowlist=touploadlist.shift();
			var dlcb=function(data){
				start_uploadlist(data,nowlist.name,sync_now_upload);
			}
			if(!nowlist.data){
				autoload(nowlist.name,dlcb)
			}else{
				dlcb(nowlist.data);
			}
		}
		autoload("list.sysapi.bin",function(data){
			if(data){
				var tmpdata=unescape(SYSLIB_base64.decode(data));
				tmpdata=JSON.parse(tmpdata);
				client_data={data:data,ver:tmpdata.time,pdata:tmpdata.data};
			}else{
				client_data={data:0,ver:0,pdata:[]};
			}
			
			if(client_data.ver>server_data.ver){
				touploadlist.push({name:"list.sysapi.bin",data:client_data.data});
				list_choosed=0;
			}else if(client_data.ver<server_data.ver){
				todownloadlist.push({name:"list.sysapi.bin",data:server_data.data})
				list_choosed=1;
			}
	
			sync_from_server();
			console.log(touploadlist);
			console.log(todownloadlist);
			sync_now_download()
		})
		
	})
	
	
}
//autoload();
var NOW_USER={
	uname:0,
	uid:0,
	utoken:0,
	stoken:0
}
var $SYSVARS=NOW_USER;
NOW_USER_tmp=0;
NOW_USER_SIGNED=0;
NOW_USER_CLOUD=0;
socket.on('signin', function (data) {
	if(data.statue=="ok"){
		NOW_USER=NOW_USER_tmp;
		NOW_USER_SIGNED=1;
	}
});
SERVER_CONNECTED=0;

socket.on('connected', function (data) {
	SERVER_CONNECTED=1;
	console.log("cloud server connected");	
});
function loaduser(){
	var user=SYSLIB_cookies.get("SYS_API_USER",0);
	if(user||user!=""){
		var user=JSON.parse(unescape(SYSLIB_base64.decode(SYSLIB_cookies.get("SYS_API_USER",0))));
		if(user.uid!="0"&&user.utoken!="0"&&user.stoken!="0"&&user.uname!="0"){
			NOW_USER_tmp=user;
			socket.emit('signin', { "uid": user.uid,"utoken":user.utoken,"stoken":user.stoken});
		}
	}
}
function saveuser(){
	if(NOW_USER_SIGNED){
		SYSLIB_cookies.set("SYS_API_USER",SYSLIB_base64.encode(escape(JSON.stringify(NOW_USER))),365);
	}
}
loaduser();

window.onload=function(){
	setTimeout(function(){
		_f("#syslab_api_loading").style.opacity=0;
		setTimeout(function(){
			_f("#syslab_api_loading").style.display="none";
		},600);
	},2000);
}
</script>
</html>


